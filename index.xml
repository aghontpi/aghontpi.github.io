<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bluepie&#39;s Journal on Bluepie&#39;s Journal</title><link>//bluepie.in/</link><description>Recent content in Bluepie&#39;s Journal on Bluepie&#39;s Journal</description><language>en-us</language><lastBuildDate>Sun, 27 Apr 2025 10:18:56 +0000</lastBuildDate><atom:link href="/" rel="self" type="application/rss+xml"/><item><title>Sub-Second Serverless Spring Boot/Reactor: Millisecond Cold-Starts via GraalVM</title><link>//bluepie.in/2025/04/reducing-spring-reactor-java-project-cold-start-to-milliseconds/</link><pubDate>Sun, 27 Apr 2025 10:18:56 +0000</pubDate><guid>//bluepie.in/2025/04/reducing-spring-reactor-java-project-cold-start-to-milliseconds/</guid><description>
&lt;h2 id=&#34;intro&#34;&gt;Intro&lt;/h2&gt;
&lt;p&gt;I run several backend services built on different frameworks and languages, One of them being Spring Boot and Spring Reactor on my own Linux server. Recently, I asked myself: why not host these services on Google Cloud Run? Cloud Run offers a free tier for the first 2 million requests per month, but if I leave an instance running (with a minimum instance count), it costs around ₹200–₹500 monthly—something I&amp;rsquo;ve paid before. The problem is cold-start latency: a traditional Spring Boot/Reactor application can take over 15 seconds to start. My users will never wait that long. Once a Cloud Run instance starts, it stays alive for about 15 minutes of inactivity before shutting down. We can’t force users to endure a 15-second delay on first request.&lt;/p&gt;
&lt;p&gt;TL;DR — A &lt;strong&gt;Spring WebFlux&lt;/strong&gt; app compiled with &lt;strong&gt;GraalVM native-image&lt;/strong&gt;:
• cold-starts in ≈ 100 ms&lt;br /&gt;
• uses ≈ 90 MB RSS&lt;br /&gt;
• when deployed on Cloud Run behind Firebase Hosting, serves up to &lt;strong&gt;2 million requests/month for free&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;why-care-about-cold-starts&#34;&gt;Why Care About Cold-Starts?&lt;/h2&gt;
&lt;p&gt;“If my Spring service gets only 10 000 requests a month, do I really need to pay for a min-instance on Cloud Run?”&lt;/p&gt;
&lt;p&gt;Answer: No. Even if each cold-start lasts 5 s, that’s only &lt;em&gt;125 vCPU-s&lt;/em&gt; and &lt;em&gt;250 GiB-s&lt;/em&gt;, which is well below the free monthly quotas of 180 k vCPU-s and 360 k GiB-s. But latency matters for user-facing APIs: a 3–5 s delay is acceptable for CRON jobs, not for UI interactions. Enter &lt;strong&gt;GraalVM Native Image&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&#34;spring-boot-3-native-the-easy-path&#34;&gt;Spring Boot 3 Native (the Easy Path)&lt;/h2&gt;
&lt;p&gt;With Spring Boot 3.4.x and the GraalVM build tools plugin, creating a native image is nearly zero-effort:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# build.gradle
plugins {
id(&amp;quot;org.springframework.boot&amp;quot;) version &amp;quot;3.4.1&amp;quot;
id(&amp;quot;org.graalvm.buildtools.native&amp;quot;) version &amp;quot;0.10.2&amp;quot;
}
# build and deploy
./gradlew clean bootBuildImage -PBP_NATIVE_IMAGE=true \
--image-name=gcr.io/$PROJECT/webflux-native
gcloud run deploy webflux-native \
--image gcr.io/$PROJECT/webflux-native \
--region us-central1 \
--platform managed \
--memory 512Mi \
--min-instances 0 \
--allow-unauthenticated
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;• Cold-start: 40–120 ms (0.25 vCPU)&lt;br /&gt;
• Memory on Cloud Run: 70–90 MB&lt;br /&gt;
• Code changes: none—your usual &lt;code&gt;@RestController&lt;/code&gt;, &lt;code&gt;Mono&lt;/code&gt;, &lt;code&gt;Flux&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;The Spring Boot plugin runs the Ahead-Of-Time (AOT) engine, generates reflection hints automatically, and hands them to GraalVM. No manual JSON is required.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;quarkus-vs-micronaut-vs-spring-boot-native&#34;&gt;Quarkus vs Micronaut vs Spring Boot Native&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Framework&lt;/th&gt;
&lt;th&gt;Native Image Size&lt;/th&gt;
&lt;th&gt;Cold-start (0.25 vCPU)&lt;/th&gt;
&lt;th&gt;DI Model&lt;/th&gt;
&lt;th&gt;Reactive API&lt;/th&gt;
&lt;th&gt;Migration Effort&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Spring Boot 3 Native&lt;/td&gt;
&lt;td&gt;70–85 MB&lt;/td&gt;
&lt;td&gt;40–120 ms&lt;/td&gt;
&lt;td&gt;Spring DI&lt;/td&gt;
&lt;td&gt;Reactor (Mono/Flux)&lt;/td&gt;
&lt;td&gt;★☆☆☆☆&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Quarkus 3&lt;/td&gt;
&lt;td&gt;45–60 MB&lt;/td&gt;
&lt;td&gt;25–80 ms&lt;/td&gt;
&lt;td&gt;CDI&lt;/td&gt;
&lt;td&gt;Mutiny / Vert.x&lt;/td&gt;
&lt;td&gt;★★★★☆&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Micronaut 4&lt;/td&gt;
&lt;td&gt;45–55 MB&lt;/td&gt;
&lt;td&gt;20–60 ms&lt;/td&gt;
&lt;td&gt;Compile-time DI&lt;/td&gt;
&lt;td&gt;Reactor, RxJava&lt;/td&gt;
&lt;td&gt;★★★☆☆&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Since my code already uses WebFlux, Spring Boot Native was a five-minute flip. The others are powerful but require annotation and API rewrites.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;cost-breakdown&#34;&gt;Cost Breakdown&lt;/h2&gt;
&lt;p&gt;• Requests: first 2 million/month free (then \$0.40/M)&lt;br /&gt;
• CPU: first 180 000 vCPU-s/month free&lt;br /&gt;
• Memory: first 360 000 GiB-s/month free&lt;br /&gt;
• Idle min-instance: \$0.0000025/vCPU-s + \$0.0000025/GiB-s&lt;br /&gt;
• Egress: first 1 GB free&lt;/p&gt;
&lt;p&gt;Example:&lt;br /&gt;
10 000 requests × 300 ms active ≈ 3 000 s total CPU time → ~63 000 free units → cost = \$0.00.&lt;/p&gt;
&lt;p&gt;Keeping one min-instance warm (0.25 vCPU / 512 MiB) costs ≈\$3.50/month—still trivial compared to user-facing latency improvements.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;custom-domain-binding&#34;&gt;Custom Domain Binding&lt;/h2&gt;
&lt;p&gt;I bound my service to a custom domain in Cloud Run—a new feature available in the &lt;code&gt;us-central1&lt;/code&gt; region. DNS setup was straightforward, and Cloud Run automatically provisions an SSL certificate.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;using-graalvm-for-my-existing-app&#34;&gt;Using GraalVM for My Existing App&lt;/h2&gt;
&lt;p&gt;I already have a mature Spring WebFlux application, so the GraalVM native-image path is the simplest. I chose GraalVM Community Edition 21:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Install GraalVM JDK 21 and the &lt;code&gt;native-image&lt;/code&gt; component (or rely on Paketo buildpacks).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Add the &lt;code&gt;org.graalvm.buildtools.native&lt;/code&gt; plugin to &lt;code&gt;build.gradle&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./gradlew clean bootBuildImage \
-Pprofile=cloudrun \
--no-daemon
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deploy with:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;gcloud run deploy my-service \
--image gcr.io/$PROJECT/my-service:latest \
--region us-central1 \
--allow-unauthenticated \
--min-instances=0
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;hiccup-runtime-hints-for-reflection&#34;&gt;Hiccup: Runtime Hints for Reflection&lt;/h3&gt;
&lt;p&gt;GraalVM performs aggressive tree-shaking and needs explicit hints for any reflection usage. In my case, I use &lt;code&gt;jjwt&lt;/code&gt; for JWT handling. Without hints, the native binary would fail at runtime, although development mode wouldn’t show errors. I provided a small registrar:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;class JjwtRuntimeHints implements RuntimeHintsRegistrar {
private static final Class&amp;lt;?&amp;gt;[] JJWT_TYPES = {
DefaultJwtParser.class,
DefaultClaimsBuilder.class,
StandardSecureDigestAlgorithms.class,
StandardKeyOperations.class,
SignatureAlgorithm.class,
StandardEncryptionAlgorithms.class,
StandardKeyAlgorithms.class,
StandardCompressionAlgorithms.class,
KeysBridge.class
};
@Override
public void registerHints(RuntimeHints hints, ClassLoader cl) {
for (Class&amp;lt;?&amp;gt; type : JJWT_TYPES) {
hints.reflection().registerType(
type,
MemberCategory.INVOKE_PUBLIC_CONSTRUCTORS,
MemberCategory.INVOKE_PUBLIC_METHODS,
MemberCategory.DECLARED_FIELDS
);
}
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Just enough to satisfy &lt;code&gt;io.jsonwebtoken&lt;/code&gt; internals—they get scanned at native-image build time.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;final-artifact-sizes-and-cold-start&#34;&gt;Final Artifact Sizes and Cold-Start&lt;/h2&gt;
&lt;p&gt;• Docker image: 109 MB raw&lt;br /&gt;
• Compressed in registry: 76 MB&lt;br /&gt;
• Cold-start observed: 0.603 ms (including initial PostgreSQL connection to a remote host)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/april-2025/artifactory-size.png&#34; alt=&#34;&#34; /&gt;&lt;br /&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april-2025/startuptime.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ci-cd-github-actions-workflow&#34;&gt;CI/CD: GitHub Actions Workflow&lt;/h2&gt;
&lt;p&gt;I automated build &amp;amp; deploy with a GitHub workflow on every push to &lt;code&gt;main&lt;/code&gt; branch, it will also work on pull request.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;name: Build and Deploy Backend to Cloud Run
on:
push:
branches: [ main ]
paths:
- &#39;backend/**&#39;
- &#39;.github/workflows/backend.yml&#39;
....
- name: Authenticate to GCP
uses: google-github-actions/auth@v2
with:
credentials_json: ${{ secrets.GCP_SA_KEY }}
- name: Activate Service Account
run: gcloud auth activate-service-account \
--key-file=${{ secrets.GCP_SA_KEY }}
....
- name: Set up GraalVM 21
uses: graalvm/setup-graalvm@v1
with:
java-version: &#39;21&#39;
distribution: &#39;graalvm-community&#39;
....
- name: Build Native Image Locally
working-directory: backend/
run: |
./gradlew clean bootBuildImage \
-Pspring.profiles.active=cloudrun \
--imageName &amp;quot;${{ steps.image_details.outputs.path }}:${{ steps.image_details.outputs.version }}&amp;quot;
- name: Push Versioned Image
run: docker push &amp;quot;${{ steps.image_details.outputs.path }}:${{ steps.image_details.outputs.version }}&amp;quot;
- name: Tag &amp;amp; Push Latest
run: |
docker tag &amp;quot;${{ steps.image_details.outputs.path }}:${{ steps.image_details.outputs.version }}&amp;quot; \
&amp;quot;${{ steps.image_details.outputs.path }}:latest&amp;quot;
docker push &amp;quot;${{ steps.image_details.outputs.path }}:latest&amp;quot;
- name: Deploy to Cloud Run
uses: google-github-actions/deploy-cloudrun@v2
with:
service: opentasks-service
region: us-central1
...
project_id: ${{ secrets.GCP_PROJECT_ID }}
env_vars: |
...
SPRING_R2DBC_URL=${{ secrets.R2DBC_URL }}
SPRING_R2DBC_USERNAME=${{ secrets.R2DBC_USERNAME }}
secrets: |
...
SPRING_R2DBC_PASSWORD=db-pass:latest
flags: |
--memory=512Mi
--min-instances=0
--concurrency=250
...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Explanation of key parts:&lt;br /&gt;
• Triggers on pushes to &lt;code&gt;main&lt;/code&gt; or manual dispatch.&lt;br /&gt;
• Authenticates with a GCP service account.&lt;br /&gt;
• Sets up GraalVM 21 community edition.&lt;br /&gt;
• Build the native image locally via &lt;code&gt;bootBuildImage&lt;/code&gt;.&lt;br /&gt;
• Pushes both versioned and &lt;code&gt;latest&lt;/code&gt; tags to Artifact Registry.&lt;br /&gt;
• Deploys to Cloud Run with zero minimum instances, custom environment variables, and resource flags.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;By combining Spring Boot 3’s native-image support with GraalVM, I reduced my service’s cold-start time from 15 seconds to under 1 second, fitting in under 100 MB of memory. This lets me use Cloud Run’s free tier without sacrificing user experience.&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;references&#34;&gt;References&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Spring Boot Native Reference Documentation&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.graalvm.org/latest/reference-manual/native-image/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;GraalVM Native Image Guide&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.google.com/run/pricing&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Google Cloud Run Free Tier &amp;amp; Pricing&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;Personal update&lt;/h2&gt;
&lt;p&gt;I’m cutting down things over the past 15 days, focusing on items that I want to pursue. Thinking a lot… almost every day, making it a habit. My mind is too cluttered, and for reasons I’ll share in future posts. Future me… how is it going? Did everything go well? Did you make peace with your choice? When I was in hometown, a friend told his dad what’s going on with me since I seemed off when I visited him. I had a good conversation with him… maybe that is what I needed? He said something that made me think: explore your thoughts with friends/others—don’t keep it a secret. That’s how you get an idea/improve the idea; you will get the push you need. I feel this is true to some extent, but the other is also true. Again, future me, what do you think?&lt;/p&gt;
&lt;p&gt;In some of my free time, I’ve been playing Ghost of Tsushima. It helps me take my mind off things. The game is beautiful; I’m taking it slow. In more ways, it’s helping me relax and gives me a boost when I want to focus. I’m keeping it under control, though, not treating it like a time sink. When I was younger, I remember I used to lock in and play for days. Heck—the last game I got addicted to was Division 2. I used to plan and play raids with people, but I eventually lost touch with most of the guild members. Thinking back, my first game guild was from a game called Elsword. As everyone was getting busy with life and not logging into the game, we planned to disband the guild and had a last-day party with everyone. I have a video of that on my old hard drive. I was back from class and late to the party, and “Pandemonium,” the guild master, was waiting on me. We had a blast, and it was a nice sunset. Hopefully I can recover it and post it here… I had fond memories of that guild. Coming back to Division 2, I constructed a huge-ass essay on how it’s affecting my life, posted it to the guild and Discord servers, and left the game.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/april-2025/Ghost-Of-Tsushima-april-2025.mp4&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description></item><item><title>DIY RO - Water Purification</title><link>//bluepie.in/2025/03/diy-water-purification/</link><pubDate>Mon, 31 Mar 2025 22:30:39 +0000</pubDate><guid>//bluepie.in/2025/03/diy-water-purification/</guid><description>
&lt;h2 id=&#34;intro&#34;&gt;Intro&lt;/h2&gt;
&lt;p&gt;The water hardness in my home (Gobi) is around ~600 ppm. In Chennai where I live, it’s around 800 ppm (metro water). Half the people get purified water for their drinking; there is business for those who supply water, while the other half get a water-purification system installed in their homes by a vendor/company that produces it. We can build a DIY homemade purifier. It’s a new challenge, a chance to learn new things, and cheaper than buying ready-made.&lt;/p&gt;
&lt;p&gt;Water “hardness” is simply the concentration of dissolved calcium and magnesium ions in water. It is usually expressed in mg/L or ppm as CaCO₃.&lt;br /&gt;
• Soft: 0–60 ppm&lt;br /&gt;
• Moderately hard: 61–120 ppm&lt;br /&gt;
• Hard: 121–180 ppm&lt;br /&gt;
• Very hard: &amp;gt; 180 ppm&lt;br /&gt;
Hard water leaves scale in pipes and appliances and can affect taste, so reducing hardness is one of the main goals of an RO unit.&lt;/p&gt;
&lt;h2 id=&#34;components-needed&#34;&gt;Components needed&lt;/h2&gt;
&lt;p&gt;Coming to things that are needed for the DIY setup, I need to buy the following items.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;S.No&lt;/th&gt;
&lt;th&gt;Item&lt;/th&gt;
&lt;th&gt;Qty&lt;/th&gt;
&lt;th&gt;Rate (₹)&lt;/th&gt;
&lt;th&gt;Amount (₹)&lt;/th&gt;
&lt;th&gt;Why it’s used&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Wall-mount plate (12″)&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;140.00&lt;/td&gt;
&lt;td&gt;140.00&lt;/td&gt;
&lt;td&gt;Base plate to fix the RO unit on the wall&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;BlueShell booster pump&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;850.00&lt;/td&gt;
&lt;td&gt;850.00&lt;/td&gt;
&lt;td&gt;Raises pressure so the RO membrane works efficiently&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;BlueShell 100 GPD RO membrane&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;850.00&lt;/td&gt;
&lt;td&gt;850.00&lt;/td&gt;
&lt;td&gt;Main purification element that removes dissolved salts&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;GAC inline cartridge&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;90.00&lt;/td&gt;
&lt;td&gt;90.00&lt;/td&gt;
&lt;td&gt;Granular activated-carbon pre-filter for chlorine removal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;CTO 10″ carbon block&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;90.00&lt;/td&gt;
&lt;td&gt;90.00&lt;/td&gt;
&lt;td&gt;Carbon block for chlorine, taste, odour removal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;Membrane housing (1812)&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;130.00&lt;/td&gt;
&lt;td&gt;130.00&lt;/td&gt;
&lt;td&gt;Holds and seals the RO membrane&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;Accord 1.5 A SMPS&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;300.00&lt;/td&gt;
&lt;td&gt;300.00&lt;/td&gt;
&lt;td&gt;24 V DC power supply for pump &amp;amp; UV lamp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;UV-chamber set (11 W)&lt;/td&gt;
&lt;td&gt;1 set&lt;/td&gt;
&lt;td&gt;300.00&lt;/td&gt;
&lt;td&gt;300.00&lt;/td&gt;
&lt;td&gt;UV-C sterilization of product water after RO&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;Handheld TDS meter&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;450.00&lt;/td&gt;
&lt;td&gt;450.00&lt;/td&gt;
&lt;td&gt;Tests input/output water quality (ppm)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;Tubing cutter&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;30.00&lt;/td&gt;
&lt;td&gt;30.00&lt;/td&gt;
&lt;td&gt;Gives clean, square cuts on RO tubing&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;Alkaline remineralizer (4″)&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;250.00&lt;/td&gt;
&lt;td&gt;250.00&lt;/td&gt;
&lt;td&gt;Adds minerals and raises pH after RO&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;10″ filter housings&lt;/td&gt;
&lt;td&gt;3 pcs&lt;/td&gt;
&lt;td&gt;120.00&lt;/td&gt;
&lt;td&gt;360.00&lt;/td&gt;
&lt;td&gt;Hold sediment, CTO and GAC cartridges&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;¼″ RO tubing (≈ 5 m)&lt;/td&gt;
&lt;td&gt;2 coils&lt;/td&gt;
&lt;td&gt;40.00&lt;/td&gt;
&lt;td&gt;80.00&lt;/td&gt;
&lt;td&gt;Connects all filters, pump, membrane and faucet&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;Two-side connectors&lt;/td&gt;
&lt;td&gt;2 pcs&lt;/td&gt;
&lt;td&gt;5.00&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;Straight unions to join tubing sections&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;15&lt;/td&gt;
&lt;td&gt;Pump elbows&lt;/td&gt;
&lt;td&gt;2 pcs&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;20.00&lt;/td&gt;
&lt;td&gt;90° elbows for pump inlet/outlet to tubing&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;Membrane elbows&lt;/td&gt;
&lt;td&gt;2 pcs&lt;/td&gt;
&lt;td&gt;5.00&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;Elbows that screw into membrane housing ports&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;17&lt;/td&gt;
&lt;td&gt;Housing elbows&lt;/td&gt;
&lt;td&gt;5 pcs&lt;/td&gt;
&lt;td&gt;9.00&lt;/td&gt;
&lt;td&gt;45.00&lt;/td&gt;
&lt;td&gt;Elbow fittings for pre-filter housings&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;18&lt;/td&gt;
&lt;td&gt;Inlet-valve set&lt;/td&gt;
&lt;td&gt;1 set&lt;/td&gt;
&lt;td&gt;120.00&lt;/td&gt;
&lt;td&gt;120.00&lt;/td&gt;
&lt;td&gt;Shuts off/isolates the water supply to the RO unit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;19&lt;/td&gt;
&lt;td&gt;Post-carbon cartridge&lt;/td&gt;
&lt;td&gt;1 pc&lt;/td&gt;
&lt;td&gt;80.00&lt;/td&gt;
&lt;td&gt;80.00&lt;/td&gt;
&lt;td&gt;“Polishing” filter that improves taste after RO&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;td&gt;C-clamp&lt;/td&gt;
&lt;td&gt;2 pcs&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;20.00&lt;/td&gt;
&lt;td&gt;Hardware for mounting the wall plate/housing&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;21&lt;/td&gt;
&lt;td&gt;X-clamp&lt;/td&gt;
&lt;td&gt;2 pcs&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;20.00&lt;/td&gt;
&lt;td&gt;Additional mounting support for the RO assembly&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;22&lt;/td&gt;
&lt;td&gt;PTFE (Teflon) tape&lt;/td&gt;
&lt;td&gt;10 rolls&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;100.00&lt;/td&gt;
&lt;td&gt;Seals threaded joints to prevent leaks&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;General-purpose tape&lt;/td&gt;
&lt;td&gt;1 roll&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;10.00&lt;/td&gt;
&lt;td&gt;Miscellaneous binding/labelling&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Total value of cash-memo items: ₹4,360&lt;/p&gt;
&lt;p&gt;Bill of the items bought.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/diy-water-filteration/water-purification-parts-bill-part1.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/diy-water-filteration/water-purifiation-parts-bill-2.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;how-all-the-parts-are-plumbed-step-by-step&#34;&gt;How all the parts are plumbed – step-by-step&lt;/h2&gt;
&lt;p&gt;We have 3 big housings. We put the following filters inside them and connect them sequentially. Using similar housing to the spun filter, we fit the other filters and connect them up until the motor.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/diy-water-filteration/spun-filter-with-housing.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Sediment (Spun) filter&lt;/strong&gt;&lt;br /&gt;
The very first stage. It traps visible particles such as sand, rust and silt so that none of the downstream cartridges get clogged prematurely.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;CTO 10″ carbon-block filter&lt;/strong&gt;&lt;br /&gt;
Removes chlorine, taste and odour. Chlorine must be taken out here because it can irreversibly damage an RO membrane.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;GAC (pre-carbon) filter&lt;/strong&gt;&lt;br /&gt;
A second carbon stage that “polishes” the water and adsorbs any remaining organic chemicals that slipped past the CTO block.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Booster pump (motor) + low-pressure cut-off&lt;/strong&gt;&lt;br /&gt;
Right after the pre-carbon filter the water enters the BlueShell booster pump.&lt;br /&gt;
• The pump raises the feed-water pressure to ~80 psi so that the RO membrane can work efficiently.&lt;br /&gt;
• Placing it here ensures that only pre-filtered, de-chlorinated water passes through the pump head, protecting the pump and its check-valves from grit or chlorine attack.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;RO membrane housing with 100 GPD membrane&lt;/strong&gt;&lt;br /&gt;
Under high pressure the semi-permeable membrane now removes dissolved salts, heavy metals, fluoride, nitrates, etc.&lt;br /&gt;
&lt;em&gt;This (following image) is how we fit the RO membrane; we need to make sure the waste-water port is not the one we use.&lt;/em&gt;&lt;br /&gt;
&lt;strong&gt;Another thing to note: The waste (concentrate) port coming out of the housing is fitted with a flow-restrictor to maintain the required pressure differential.&lt;/strong&gt;&lt;br /&gt;
&lt;img src=&#34;//bluepie.in/images/posts/diy-water-filteration/ro-membrane-how-to-attach.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Post-carbon (polishing) filter&lt;/strong&gt;&lt;br /&gt;
The first stage on the product-water side. It adsorbs any residual gases and improves the taste and smell of the permeate coming out of the RO membrane.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Alkaline remineralizer&lt;/strong&gt;&lt;br /&gt;
Adds back healthy minerals (calcium, magnesium, potassium) and gently increases the pH so the water is no longer slightly acidic.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;UV-C chamber (11 W)&lt;/strong&gt;&lt;br /&gt;
The final barrier. Ultraviolet light disinfects the remineralized water, inactivating any bacteria, viruses or cysts that might have slipped through or grown in the storage tank.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;From the UV outlet the water goes to the water storage through pipes.&lt;/p&gt;
&lt;h2 id=&#34;i-also-got-a-ph-tester-measured-the-colour&#34;&gt;I also got a pH tester, measured the colour.&lt;/h2&gt;
&lt;p&gt;The tester uses a liquid reagent: add 2 drops to 5 ml of water and compare the resulting colour to the chart in the pH tester.&lt;br /&gt;
• Raw inlet water: pH ≈ 7.4 (greenish)&lt;br /&gt;
• RO permeate before remineralizer: pH ≈ 6.3 (yellow)&lt;br /&gt;
• Final water after remineralizer: pH ≈ 7.2 (light green)&lt;br /&gt;
This shows the remineralizer is doing its job—bringing the pH back close to neutral so the water is neither acidic nor alkaline.&lt;/p&gt;
&lt;h2 id=&#34;final-setup&#34;&gt;Final setup&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/diy-water-filteration/diy-water-purification-end.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;mounting&#34;&gt;Mounting&lt;/h2&gt;
&lt;p&gt;Mounted everything with a zip-tie to a window in the kitchen. When everything is connected, leave it running for 20 mins; you can immediately detect the change. The TDS of the purified drinking-water bottle that we buy is about 25 ppm, I get 19 ppm with this setup.&lt;/p&gt;
&lt;h2 id=&#34;references&#34;&gt;References&lt;/h2&gt;
&lt;p&gt;Central Pollution Control Board India&lt;br /&gt;
&lt;a href=&#34;https://cpcb.nic.in/wqm/BIS_Drinking_Water_Specification.pdf&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;https://cpcb.nic.in/wqm/BIS_Drinking_Water_Specification.pdf&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;Personal Update&lt;/h2&gt;
&lt;p&gt;Feel like everything is stagnant… even though there’s small progress. If you are working for big corpora, you are just a row in an Excel sheet. The feeling resonates more and more reading trending Hacker News and things that happen around in personal experience. As for me, as always trying to make time for open source and my hobbies… in the increasing midst of responsibilities coming towards me. I also almost got into a marriage arranged by my dad, forced to go see them… the girl &amp;amp; girl’s family like me and are trying to convince me into marriage, my dad doing all his best to set this up, fighting with me, etc. The girl is good too, perfect for family, they are a distant relative, born in 2000… But there are other plans/God has other plans. ~future me reading this… what happened?&lt;/p&gt;
&lt;p&gt;Talked to an old friend; he said he discovered a private office Wi-Fi password written on a note and has been using it secretly. That reminded me of the first time I cracked a WPA endpoint in 2015. It felt great back then. We had BSNL broadband—“unlimited” but stuck at 60 kbps. I used to combine my connection with my neighbor’s Wi-Fi for maximum speeds. Those were fun times; I even made a mod of an application that combined network connections&amp;hellip;Long story short, he reminded me of Wi-Fi hacking. When I got back home to Gobi, I brought out my old Wi-Fi packet-injecting dongle and Linux laptop to chennai. I found a couple of neighbors’ Wi-Fi networks. After shutting down my unreliable Airtel connection in Chennai, I switched to unlimited mobile data (from previous posts), so I decided to use their Wi-Fi (nobody uses wpa3.. even the new routers comes with wpa2, you can easily capture the handshake and crack it.. I used hashcat, its super fast and reliable). While on their network, I logged in to their router, checked their device list, and configured Wi-Fi settings for a longer range on 2.4 GHz by switching between 20 Hz and 40 Hz channels.. Some of the closest Wi-Fi access points are 5 GHz and offers low latency too.. By seeing the device list, I was able to mimic their device name and avoid being caught. For example: “smart-camera.”.. to be fair, I would just use them for internet..nothing more..nothing less.&lt;/p&gt;</description></item><item><title>JWT Authentication with Refresh Tokens in Spring WebFlux</title><link>//bluepie.in/2025/02/jwt-auth/</link><pubDate>Sun, 02 Feb 2025 16:10:12 +0000</pubDate><guid>//bluepie.in/2025/02/jwt-auth/</guid><description>
&lt;h3 id=&#34;introduction&#34;&gt;&lt;strong&gt;Introduction&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Summary:&lt;/strong&gt; I’m documenting this so that I can refer back to it in the future. Recently, I’ve been working with Spring WebFlux, and although I’ve previously used JWTs, this is my first time writing about them. I often forget the implementation details when switching between languages or frameworks, so I’m recording this while it’s still fresh in my mind.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;JSON Web Tokens (&lt;strong&gt;JWTs&lt;/strong&gt;) are a compact way to prove a user’s identity between two parties—usually a browser and your API.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;token-life-cycle&#34;&gt;&lt;strong&gt;Token life-cycle&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;A JWT is &lt;em&gt;self-contained&lt;/em&gt;: it carries the user’s ID, roles, and an &lt;strong&gt;expiry&lt;/strong&gt; inside the token itself.&lt;br /&gt;
To balance security and convenience I use &lt;strong&gt;two clocks&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Clock&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;What it limits&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Typical value&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;What happens when it hits zero&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Access expiry&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;How long the current token stays valid&lt;/td&gt;
&lt;td&gt;&lt;em&gt;15–30 min&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;Client must call &lt;code&gt;/auth/refresh&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Refresh expiry&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;How long the &lt;em&gt;refresh token&lt;/em&gt; can mint new access tokens&lt;/td&gt;
&lt;td&gt;&lt;em&gt;7–30 days&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;User must log in again&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Flow:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;/login ──► access + refresh token
│
(before access expiry)
▼
/refresh ──► new access token
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After the &lt;strong&gt;refresh expiry&lt;/strong&gt; passes, even the refresh endpoint refuses to issue new tokens—forcing a fresh login.&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;building-blocks&#34;&gt;&lt;strong&gt;Building blocks&lt;/strong&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Model&lt;/strong&gt; – database tables for users &amp;amp; login history&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Repository&lt;/strong&gt; – Reactive CRUD interfaces provided by Spring Data R2DBC&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Service&lt;/strong&gt; – business logic (password checks, audit log)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Auth manager&lt;/strong&gt; – validates credentials or JWT claims&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Filter&lt;/strong&gt; – extracts the Authorization: Bearer … header&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security config&lt;/strong&gt; – wires it all together&lt;/li&gt;
&lt;/ol&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;essential-code&#34;&gt;&lt;strong&gt;Essential code&lt;/strong&gt;&lt;/h2&gt;
&lt;h4 id=&#34;entity-classes&#34;&gt;&lt;strong&gt;Entity Classes&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;These classes represent database tables as Java objects using Spring Data R2DBC. &lt;code&gt;@Table&lt;/code&gt; maps the class to a table, and Lombok annotations (&lt;code&gt;@Data&lt;/code&gt;, &lt;code&gt;@Builder&lt;/code&gt;, etc.) generate getters, setters, constructors, and a builder.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Table(&amp;quot;users&amp;quot;)
@Data @Builder @NoArgsConstructor @AllArgsConstructor
public class UserEntity {
@Id private Long id;
private String username;
private String password; // hashed
private String roles; // e.g. &amp;quot;USER,ADMIN&amp;quot;
private boolean enabled;
}
@Table(&amp;quot;login_history&amp;quot;)
@Data @Builder @NoArgsConstructor @AllArgsConstructor
public class LoginHistory {
@Id private Long id;
private Long userId;
private LocalDateTime loginTime;
private String ipAddress;
private boolean successful;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;repositories&#34;&gt;&lt;strong&gt;Repositories&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Spring Data’s &lt;code&gt;ReactiveCrudRepository&lt;/code&gt; provides reactive CRUD operations. By extending these interfaces, Spring auto-generates the implementation at runtime.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public interface UserRepository
extends ReactiveCrudRepository&amp;lt;UserEntity, Long&amp;gt; {
Mono&amp;lt;UserEntity&amp;gt; findByUsername(String username);
}
public interface LoginHistoryRepository
extends ReactiveCrudRepository&amp;lt;LoginHistory, Long&amp;gt; {}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;jwt-filter-excerpt&#34;&gt;&lt;strong&gt;JWT filter&lt;/strong&gt; (excerpt)&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;ServerAuthenticationConverter&lt;/code&gt; is a Spring Security WebFlux interface for converting HTTP requests into &lt;code&gt;Authentication&lt;/code&gt; objects. In this converter, we extract and validate the JWT token from the Authorization header.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Slf4j
public class JwtAuthConverter implements ServerAuthenticationConverter {
@Override
public Mono&amp;lt;Authentication&amp;gt; convert(ServerWebExchange exchange) {
String header = exchange.getRequest()
.getHeaders()
.getFirst(HttpHeaders.AUTHORIZATION);
if (header == null || !header.startsWith(&amp;quot;Bearer &amp;quot;)) return Mono.empty();
try {
String token = header.substring(7);
Jws&amp;lt;Claims&amp;gt; claims = JwtUtil.validateTokenAndGetClaims(token);
String username = claims.getBody().getSubject();
List&amp;lt;String&amp;gt; roles = claims.getBody().get(&amp;quot;roles&amp;quot;, List.class);
List&amp;lt;GrantedAuthority&amp;gt; authorities = roles.stream()
.map(SimpleGrantedAuthority::new)
.collect(Collectors.toList());
return Mono.just(new UsernamePasswordAuthenticationToken(
username, null, authorities));
} catch (Exception ex) {
log.warn(&amp;quot;Invalid token: {}&amp;quot;, ex.getMessage());
return Mono.empty();
}
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;security-configuration-simplified&#34;&gt;&lt;strong&gt;Security configuration&lt;/strong&gt; (simplified)&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;@Configuration&lt;/code&gt; class defines beans for Spring’s application context. &lt;code&gt;@EnableWebFluxSecurity&lt;/code&gt; activates WebFlux security support. We configure a &lt;code&gt;SecurityWebFilterChain&lt;/code&gt; bean to set up CSRF, CORS, endpoint permissions, and insert our JWT filter.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Configuration
@EnableWebFluxSecurity
public class SecurityConfig {
@Bean
public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {
JwtAuthWebFilter jwt = new JwtAuthWebFilter(new JwtReactiveAuthManager());
jwt.setServerAuthenticationConverter(new JwtAuthConverter());
return http
.csrf(ServerHttpSecurity.CsrfSpec::disable)
.cors(ServerHttpSecurity.CorsSpec::disable)
.httpBasic(ServerHttpSecurity.HttpBasicSpec::disable)
.formLogin(ServerHttpSecurity.FormLoginSpec::disable)
.exceptionHandling(e -&amp;gt; e.authenticationEntryPoint(
(exch, ex) -&amp;gt; {
exch.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);
return exch.getResponse().setComplete();
}))
.authorizeExchange(ex -&amp;gt; ex
.pathMatchers(
&amp;quot;/api/v1/auth/login&amp;quot;,
&amp;quot;/api/v1/auth/refresh&amp;quot;,
&amp;quot;/api/v1/auth/validate&amp;quot;,
&amp;quot;/actuator/**&amp;quot;)
.permitAll()
.pathMatchers(&amp;quot;/api/v1/task/**&amp;quot;).authenticated())
.addFilterAt(jwt, SecurityWebFiltersOrder.AUTHENTICATION)
.build();
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;reactive-authentication-manager&#34;&gt;&lt;strong&gt;Reactive authentication manager&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Implementing &lt;code&gt;ReactiveAuthenticationManager&lt;/code&gt; allows custom authentication logic in WebFlux. This manager checks credentials, handles disabled accounts, and records login attempts via the &lt;code&gt;UserService&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Component
@RequiredArgsConstructor
public class DatabaseReactiveAuthManager implements ReactiveAuthenticationManager {
private final UserService users;
@Override
public Mono&amp;lt;Authentication&amp;gt; authenticate(Authentication auth) {
String username = auth.getName();
String rawPwd = auth.getCredentials().toString();
return users.findByUsername(username)
.switchIfEmpty(Mono.error(new BadCredentialsException(&amp;quot;User not found&amp;quot;)))
.flatMap(u -&amp;gt; {
if (!users.checkPassword(rawPwd, u.getPassword()))
return users.recordLoginAttempt(u, false, null)
.then(Mono.error(new BadCredentialsException(&amp;quot;Bad password&amp;quot;)));
if (!u.isEnabled())
return Mono.error(new DisabledException(&amp;quot;Account disabled&amp;quot;));
List&amp;lt;GrantedAuthority&amp;gt; roles = Arrays.stream(u.getRoles().split(&amp;quot;,&amp;quot;))
.map(String::trim)
.map(SimpleGrantedAuthority::new)
.collect(Collectors.toList());
return users.recordLoginAttempt(u, true, null)
.thenReturn(new UsernamePasswordAuthenticationToken(
username, null, roles));
});
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h4 id=&#34;configuration-properties&#34;&gt;&lt;strong&gt;Configuration properties&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;These YAML properties configure Spring Security’s JWT support, specifying the signing &lt;strong&gt;secret&lt;/strong&gt; and token lifetimes.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;security:
encryption:
secret: _&amp;quot;encryption_secret&amp;quot;_
jwt:
expiration-time: __1_440_000__ # 24 minutes (ms)
refresh-expiration-time: __604_800_000__ # 7 days (ms)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tip – generate a strong secret:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-py&#34;&gt;# This one-off command uses Docker to generate a bcrypt hash for a random 32-byte secret
docker run --rm python:3.9-slim \
python - &amp;lt;&amp;lt;&#39;PY&#39;
import bcrypt, os
print(bcrypt.hashpw(os.urandom(32), bcrypt.gensalt()).decode())
PY
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;recap&#34;&gt;&lt;strong&gt;Recap&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Two expiries&lt;/strong&gt; keep sessions short yet user-friendly.&lt;/li&gt;
&lt;li&gt;A reactive filter &lt;strong&gt;parses&lt;/strong&gt; the token and attaches &lt;strong&gt;authorities&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;A database auth manager handles &lt;strong&gt;login&lt;/strong&gt;, &lt;strong&gt;password checks&lt;/strong&gt;, and &lt;strong&gt;audit logs&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Spring WebFlux security is glued together with one concise &lt;strong&gt;&lt;code&gt;SecurityWebFilterChain&lt;/code&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;references&#34;&gt;&lt;strong&gt;References&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://jwt.io/introduction/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;JWT.io Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/jwtk/jjwt#readme&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;JJWT (Java JWT) Documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;&lt;strong&gt;Personal Update&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Setup JioFiber at home, disconnected Airtel in Chennai, and ported all my SIMs to Jio except mom’s. Jio offers unlimited data (4G/5G) on individual plans for $8.77 per month. Nowadays I don’t have enough time to do anything. No no no…not gonna start a rant here…lol. Talked to a friend about old WiFi hacking days…(more in the next few posts).&lt;/p&gt;</description></item><item><title>Unlimited Photos Storage Without Root - Part 2</title><link>//bluepie.in/2025/01/unlimited-photos-storage-without-root/</link><pubDate>Fri, 03 Jan 2025 18:11:41 +0000</pubDate><guid>//bluepie.in/2025/01/unlimited-photos-storage-without-root/</guid><description>
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;This post is a continuation of my &lt;a href=&#34;https://bluepie.in/2024/04/rooting-my-pixel/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Rooting My Pixel&lt;/a&gt;. Over the past months, I’ve been using my rooted phone to bypass storage limits and enjoy unlimited Google Photos storage. However, using a rooted device isn’t without its challenges—if someone gains physical access to my phone, my data becomes vulnerable. Banking appsa and even general purpose applications refuse to run on rooted devices because they detect system tampering. In some cases, the Play Store won’t allow you to install certain apps at all. To get around these restrictions, I rely on LSPosed modules that help conceal root access, allowing these apps to function without issues.&lt;/p&gt;
&lt;h2 id=&#34;the-update-dilemma-keeping-root-intact&#34;&gt;The Update Dilemma: Keeping Root Intact&lt;/h2&gt;
&lt;p&gt;Every time my Pixel receives an update, I’m forced to patch the boot image, a critical step for Magisk to continue functioning properly. The process generally involves:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Downloading the stock image for my Pixel model.&lt;/li&gt;
&lt;li&gt;Extracting the boot image.&lt;/li&gt;
&lt;li&gt;Patching the boot image using Magisk.&lt;/li&gt;
&lt;li&gt;Flashing the patched boot image back onto the device.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Skipping any of these steps means Magisk (and its modules) won’t load, breaking the tweaks I depend on.&lt;/p&gt;
&lt;h2 id=&#34;why-not-disable-updates&#34;&gt;Why Not Disable Updates?&lt;/h2&gt;
&lt;p&gt;It might seem tempting to simply disable updates, but the monthly Pixel updates often include important stability and OS fixes. For instance, the December 2024 Android 15 update introduced a bug where Wi-Fi and mobile internet would disconnect automatically after a period of inactivity, a problem that’s been widely discussed on Reddit, Google Forums, and other communities. I’m now waiting for the January patch that should resolve this issue. The takeaway? Staying updated is crucial despite the extra work it sometimes entails.&lt;/p&gt;
&lt;h2 id=&#34;emulating-the-old-pixel-without-root&#34;&gt;Emulating the Old Pixel Without Root&lt;/h2&gt;
&lt;p&gt;If you’ve followed my previous posts, you know that rooting was once the only method to emulate the old Pixel’s functionality. Today, patching offers a robust alternative. The &lt;a href=&#34;https://github.com/revanced/revanced-patches&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ReVanced Patches repository&lt;/a&gt; provides a comprehensive collection of smali patches that let you modify apps without needing root access.&lt;/p&gt;
&lt;p&gt;I stumbled upon these patches while exploring alternatives to YouTube Premium. After canceling my subscription.&lt;/p&gt;
&lt;p&gt;There was some controversy earlier in the ReVanced journey. The project initially faced criticism on GitHub for directly hosting mods, which led to pressure from the google and github. In response, the devs decided to split the project, hosting the patch files separately from the patched binaries. This move not only addressed the concerns but also streamlined the development process, keeping the patch logic distinct and easier to manage.&lt;/p&gt;
&lt;h2 id=&#34;downloading-the-patches-and-apk&#34;&gt;Downloading the Patches and APK&lt;/h2&gt;
&lt;p&gt;Before patching, you need to:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Download the Latest Google Photos APK&lt;/strong&gt;&lt;br /&gt;
Make sure to obtain the standalone APK file rather than a bundled format. sites like &lt;a href=&#34;https://www.apkmirror.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;APKMirror&lt;/a&gt; are a good source.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Download the Latest ReVanced Patches&lt;/strong&gt;&lt;br /&gt;
Head over to the &lt;a href=&#34;https://github.com/revanced/revanced-patches&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ReVanced Patches repository&lt;/a&gt; to get the most recent version of the patch file (the &lt;code&gt;.rvp&lt;/code&gt; file). Using the latest patches ensures better compatibility with the app version you’re patching.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;patching-the-apk&#34;&gt;Patching the APK&lt;/h2&gt;
&lt;p&gt;Once you have both the APK and the patch file, you can patch the app using the following command.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;java -jar revanced-cli.jar patch --patches patches.rvp -o patched.apk my_app.apk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Simply replace &lt;code&gt;our_app.apk&lt;/code&gt; with the path to the downloaded APK (for example, my Google Photos APK). This command tells the Revanced CLI to apply the patches defined in &lt;code&gt;patches.rvp&lt;/code&gt; to my APK and output a patched version named &lt;code&gt;patched.apk&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;how-it-works&#34;&gt;How It Works&lt;/h2&gt;
&lt;p&gt;The magic happens in the &lt;code&gt;.rvp&lt;/code&gt; file—it acts as a manifest that lists all supported packages along with their corresponding patches. When you run the command, the tool detects the package name in my APK and applies only the relevant modifications. (A small caveat: the current patching process only works via the PC command-line interface; the Android-based ReVanced Patcher app has issues patching google photos app for years now..)&lt;/p&gt;
&lt;h2 id=&#34;installing-the-patched-app&#34;&gt;Installing the Patched App&lt;/h2&gt;
&lt;p&gt;After patching, simply install the new APK on the device. On first launch, the app will prompt you to install ReVanced MicroG—a companion component needed for proper operation. For my convenience, I’m including download links for all the essential files at the end of this post. I’ll update this section as I patch new versions.&lt;/p&gt;
&lt;div style=&#34;display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/jan2025/img1.png&#34; alt=&#34;&#34; style=&#34;height:320px;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/jan2025/img2.png&#34; alt=&#34;&#34; style=&#34;height:320px;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/jan2025/img3.png&#34; alt=&#34;&#34; style=&#34;height:320px;&#34;&gt;
&lt;/div&gt;
&lt;h2 id=&#34;relocking-the-pixel-device&#34;&gt;Relocking the Pixel Device&lt;/h2&gt;
&lt;p&gt;Relocking Pixel device is a critical step if I want to revert my device back to its original, secure state. Whether we choose to relock via fastboot or by flashing the official ROM, please note that both methods will erase our device data. Make sure to backup all important files before proceeding.&lt;/p&gt;
&lt;h3 id=&#34;method-1-fastboot-relock&#34;&gt;Method 1: Fastboot Relock&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Enter Fastboot Mode:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Power off device completely.&lt;/li&gt;
&lt;li&gt;Hold the &lt;strong&gt;Power&lt;/strong&gt; and &lt;strong&gt;Volume Down&lt;/strong&gt; buttons simultaneously until the fastboot screen appears.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Relock the Bootloader:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connect my device to my computer using a USB cable.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Open a terminal (or Command Prompt) and execute the command:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;fastboot flashing lock
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; Some devices might require the command &lt;code&gt;fastboot oem lock&lt;/code&gt; instead.&lt;/p&gt;
&lt;/blockquote&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Disable OEM Unlocking:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Once the bootloader is relocked, navigate to &lt;strong&gt;Developer Options&lt;/strong&gt; on the device.&lt;/li&gt;
&lt;li&gt;Disable the &lt;strong&gt;OEM Unlocking&lt;/strong&gt; option to prevent unauthorized bootloader modifications in the future.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;method-2-flashing-the-official-rom&#34;&gt;Method 2: Flashing the Official ROM&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Download the Official ROM:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Visit the &lt;a href=&#34;https://developers.google.com/android/images#lynx&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Official Pixel Devices Site&lt;/a&gt; to download the latest factory image for your specific model.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Flash the ROM:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Follow the detailed instructions provided on the support site to flash the official ROM. This method restores the device to its factory state and automatically relocks the bootloader.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Choose the method that best fits your comfort level and requirements. Relocking via fastboot is generally quicker if you’re familiar with command-line operations, while flashing the official ROM provides a comprehensive reset to stock software.&lt;/p&gt;
&lt;h3 id=&#34;references&#34;&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ReVanced CLI&lt;/strong&gt;: &lt;a href=&#34;https://github.com/revanced/revanced-cli&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;GitHub - ReVanced CLI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ReVanced Patches Repo&lt;/strong&gt;: &lt;a href=&#34;https://github.com/revanced/revanced-patches&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;GitHub - ReVanced Patches&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ReVanced GmsCore&lt;/strong&gt;: &lt;a href=&#34;https://github.com/ReVanced/GmsCore/releases&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;GitHub - ReVanced GmsCore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Google Photos APK&lt;/strong&gt;: &lt;a href=&#34;https://www.apkmirror.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;APKMirror&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;patched-files&#34;&gt;Patched Files&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Any future patches that I release will be updated in this section.&lt;/p&gt;
&lt;h2 id=&#34;patches-files&#34;&gt;Patches Files&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;File Name&lt;/th&gt;
&lt;th&gt;Download Link&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;gphotos-patched-jan-2025 (Part 1)&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;//bluepie.in/attachments/jan2025/gphotos-patched-jan-2025.apk.zip.001&#34;&gt;Download Part 1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gphotos-patched-jan-2025 (Part 2)&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;//bluepie.in/attachments/jan2025/gphotos-patched-jan-2025.apk.zip.002&#34;&gt;Download Part 2&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gms-core-jan2025&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;//bluepie.in/attachments/jan2025/app.revanced.android.gms-240913008-signed.apk&#34;&gt;Download&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;br /&gt;
The &lt;code&gt;gphotos-patched-jan-2025&lt;/code&gt; file is split into parts using Keka on macOS with a 99MB split threshold to help manage file sizes and site tracking. After downloading both parts, simply extract the first file (with the &lt;code&gt;.zip.001&lt;/code&gt; extension) using your preferred archive tool (such as Keka, 7-Zip, or WinRAR..etc). The tool will automatically combine the parts and extract the complete APK.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;Personal Update&lt;/h2&gt;
&lt;p&gt;AI is taking over, wth! For historical matching… DeepSeek is released, competing with OpenAI&amp;rsquo;s latest thinking model. I&amp;rsquo;m sure OpenAI will have some response to it. &lt;!---I’ve enjoyed a 5-day vacation—it was pleasant and something I’ll remember for the upcoming days. (Spent with Vi, aka 3&#39;rd Frost.)---&gt;I&amp;rsquo;m planning to go home and spend some time with family, and I have to set up Jio AirFibre, converting my SIMs to Jio for unlimited internet (you’ll see a post about this later). The broadband over there isn’t that good and the signal inside the home is weak; plus, it comes bundled with TV, movies, and disney+, discovery+,..etc I’m going to disconnect Airtel TV/DTH in favor of this since it works with just WiFi and doesn&amp;rsquo;t require routing everywhere. &lt;!---Since I&#39;m planning to vacate Chennai in March, after February (Frost&#39;s 3rd birthday), things are going well. I even decided to tell Mom and Dad about Vi and show them by taking them to our Chennai home. Currently, as of this writing, they are not in Chennai with me—they went hometown last time I visited for functions and to take care of Grandma.---&gt;&lt;/p&gt;</description></item><item><title>Certbot Manual Hook – Automating Wildcard Domain Renewals</title><link>//bluepie.in/2024/12/certbot-manual-hook/</link><pubDate>Sat, 07 Dec 2024 03:02:36 +0000</pubDate><guid>//bluepie.in/2024/12/certbot-manual-hook/</guid><description>
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;Securing my website with HTTPS is crucial, and &lt;a href=&#34;https://certbot.eff.org/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Certbot&lt;/a&gt; makes it straightforward for many domains. However, when it comes to wildcard domains (like &lt;code&gt;*.domain.com&lt;/code&gt;), there’s a bit more work involved—particularly if I want to automate renewals.&lt;/p&gt;
&lt;p&gt;This post explains how I set up a &lt;strong&gt;manual DNS hook&lt;/strong&gt; for Certbot that integrates with my domain name provider’s API (in this example, GoDaddy), so I no longer have to manually add DNS TXT records every time I need to renew my wildcard certificate.&lt;/p&gt;
&lt;h2 id=&#34;why-do-we-need-this&#34;&gt;Why Do We Need This?&lt;/h2&gt;
&lt;p&gt;Certbot automates the HTTPS setup for many domain configurations. However, &lt;strong&gt;wildcard certificates&lt;/strong&gt; require DNS-based validation—meaning I must add a TXT record to prove domain ownership. Certbot does not automatically update DNS for every provider. Thus, without automation, I’d be forced to:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Run Certbot.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Grab the &lt;code&gt;_acme-challenge&lt;/code&gt; TXT record details.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Log in to my DNS panel and manually create the TXT record.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Wait for DNS to propagate.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Resume the Certbot process.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Finally, clean up the TXT record.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Doing this every few months quickly becomes tedious, especially if I manage multiple wildcard domains. Luckily, Certbot’s &lt;code&gt;--manual-auth-hook&lt;/code&gt; parameter can help me automate these steps.&lt;/p&gt;
&lt;h2 id=&#34;the-goal&#34;&gt;The Goal&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Automate&lt;/strong&gt; the DNS validation process for wildcard certificate renewals using Certbot hooks.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Utilize my DNS provider’s API (in my case, &lt;strong&gt;GoDaddy&lt;/strong&gt;) to create and remove the required &lt;code&gt;_acme-challenge&lt;/code&gt; TXT record automatically.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Integrate this process into a &lt;code&gt;crontab&lt;/code&gt; so renewals happen on schedule without manual intervention.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;current-manual-process&#34;&gt;Current (Manual) Process&lt;/h2&gt;
&lt;p&gt;Here’s what I was doing without automation:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Run Certbot: &lt;code&gt;certbot certonly --manual ...&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Certbot tells me which TXT record to create, e.g. &lt;code&gt;&amp;quot;_acme-challenge.domain.com&amp;quot;&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;I log into GoDaddy (or another provider) and create the TXT record with the provided value.&lt;/li&gt;
&lt;li&gt;I wait for DNS propagation (a few minutes).&lt;/li&gt;
&lt;li&gt;Certbot verifies and finalizes the certificate issuance.&lt;/li&gt;
&lt;li&gt;I remove or empty out the TXT record.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This process, while doable, is time-consuming and must be repeated every 60–90 days (depending on my renewal schedule).&lt;/p&gt;
&lt;h2 id=&#34;godaddy-api-endpoint&#34;&gt;Godaddy API endpoint&lt;/h2&gt;
&lt;h2 id=&#34;automating-the-workflow&#34;&gt;Automating the Workflow&lt;/h2&gt;
&lt;p&gt;To automate the renewal of my wildcard domain certificate, I leverage my domain provider&amp;rsquo;s API to manage DNS TXT records programmatically. I use &lt;strong&gt;GoDaddy&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;API Access:&lt;/strong&gt; Ensure GoDaddy supports DNS management via API.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;API Credentials:&lt;/strong&gt; Obtain my API key and secret from the &lt;a href=&#34;https://developer.godaddy.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;GoDaddy Developer Portal&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;godaddy-api-endpoint-1&#34;&gt;GoDaddy API Endpoint&lt;/h3&gt;
&lt;p&gt;I use the following endpoint to manage TXT records:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;https://api.godaddy.com/v1/domains/${GODADDY_DOMAIN}/records/TXT/${RECORD_NAME}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Parameters:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;${GODADDY_DOMAIN}&lt;/code&gt;&lt;/strong&gt;: My root domain (e.g., &lt;code&gt;example.com&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;${RECORD_NAME}&lt;/code&gt;&lt;/strong&gt;: Typically &lt;code&gt;_acme-challenge&lt;/code&gt; for Certbot.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;using-the-api&#34;&gt;Using the API&lt;/h3&gt;
&lt;h4 id=&#34;testing-create-update-txt-record-endpoints&#34;&gt;Testing Create/Update TXT Record Endpoints&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;curl -s -X PUT \
-H &amp;quot;Authorization: sso-key ${GODADDY_KEY}:${GODADDY_SECRET}&amp;quot; \
-H &amp;quot;Content-Type: application/json&amp;quot; \
-d &amp;quot;[{\&amp;quot;data\&amp;quot;: \&amp;quot;${CERTBOT_VALIDATION}\&amp;quot;, \&amp;quot;ttl\&amp;quot;: 600}]&amp;quot; \
&amp;quot;https://api.godaddy.com/v1/domains/${GODADDY_DOMAIN}/records/TXT/${RECORD_NAME}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Headers:&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Authorization&lt;/code&gt;: &lt;code&gt;sso-key MY_API_KEY:MY_API_SECRET&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Content-Type&lt;/code&gt;: &lt;code&gt;application/json&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Data:&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;data&amp;quot;&lt;/code&gt;: Validation string from Certbot.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;ttl&amp;quot;&lt;/code&gt;: Time-to-live (e.g., &lt;code&gt;600&lt;/code&gt; seconds).&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;remove-txt-record&#34;&gt;Remove TXT Record&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;curl -s -X PUT \
-H &amp;quot;Authorization: sso-key ${GODADDY_KEY}:${GODADDY_SECRET}&amp;quot; \
-H &amp;quot;Content-Type: application/json&amp;quot; \
-d &amp;quot;[]&amp;quot; \
&amp;quot;https://api.godaddy.com/v1/domains/${GODADDY_DOMAIN}/records/TXT/${RECORD_NAME}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;integration-with-certbot-hooks&#34;&gt;Integration with Certbot Hooks&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Auth Hook (&lt;code&gt;godaddy-auth.sh&lt;/code&gt;):&lt;/strong&gt; Adds the TXT record before validation.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cleanup Hook (&lt;code&gt;godaddy-cleanup.sh&lt;/code&gt;):&lt;/strong&gt; Removes the TXT record after validation.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I ensure my scripts use the above &lt;code&gt;curl&lt;/code&gt; commands with the appropriate environment variables (&lt;code&gt;GODADDY_KEY&lt;/code&gt;, &lt;code&gt;GODADDY_SECRET&lt;/code&gt;, &lt;code&gt;GODADDY_DOMAIN&lt;/code&gt;, &lt;code&gt;RECORD_NAME&lt;/code&gt;, &lt;code&gt;CERTBOT_VALIDATION&lt;/code&gt;).&lt;/p&gt;
&lt;h2 id=&#34;the-automated-solution&#34;&gt;The Automated Solution&lt;/h2&gt;
&lt;p&gt;Certbot offers hooks that run custom scripts to automate these exact steps:&lt;/p&gt;
&lt;h3 id=&#34;1-command-with-hooks&#34;&gt;1. Command with Hooks&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;certbot certonly \
--manual \
--preferred-challenges dns \
--manual-auth-hook /etc/letsencrypt/scripts/godaddy-auth.sh \
--manual-cleanup-hook /etc/letsencrypt/scripts/godaddy-cleanup.sh \
--agree-tos \
-d &#39;*.wild.card.domain&#39; \
--preferred-chain &amp;quot;ISRG Root X1&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;--manual-auth-hook&lt;/code&gt;&lt;/strong&gt;: Runs a script before Certbot attempts to validate the domain (to set up the TXT record).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;--manual-cleanup-hook&lt;/code&gt;&lt;/strong&gt;: Runs a script after validation completes (to remove or clear the TXT record).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-godaddy-auth-script&#34;&gt;2. GoDaddy Auth Script&lt;/h3&gt;
&lt;p&gt;The following script (&lt;code&gt;godaddy-auth.sh&lt;/code&gt;) is triggered by the &lt;code&gt;--manual-auth-hook&lt;/code&gt;. It reads environment variables set by Certbot—like &lt;code&gt;CERTBOT_DOMAIN&lt;/code&gt; and &lt;code&gt;CERTBOT_VALIDATION&lt;/code&gt;—and then updates the DNS record via the GoDaddy API.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#!/usr/bin/env bash
# /etc/letsencrypt/scripts/godaddy-auth.sh
# Certbot environment variables:
# - CERTBOT_DOMAIN (the domain being authenticated)
# - CERTBOT_VALIDATION (the validation string for TXT record)
GODADDY_KEY=&amp;quot;domain_name_provider_key&amp;quot;
GODADDY_SECRET=&amp;quot;domain_name_provider_secret&amp;quot;
GODADDY_DOMAIN=&amp;quot;your_root_domain&amp;quot; # e.g., &amp;quot;example.com&amp;quot;
TTL=600
# Subdomain that needs to be updated
RECORD_NAME=&amp;quot;_acme-challenge&amp;quot;
# Build request payload
DATA=&amp;quot;[{\&amp;quot;data\&amp;quot;: \&amp;quot;${CERTBOT_VALIDATION}\&amp;quot;, \&amp;quot;ttl\&amp;quot;: ${TTL}}]&amp;quot;
curl -s -X PUT \
-H &amp;quot;Authorization: sso-key ${GODADDY_KEY}:${GODADDY_SECRET}&amp;quot; \
-H &amp;quot;Content-Type: application/json&amp;quot; \
-d &amp;quot;${DATA}&amp;quot; \
&amp;quot;https://api.godaddy.com/v1/domains/${GODADDY_DOMAIN}/records/TXT/${RECORD_NAME}&amp;quot;
echo &amp;quot;GoDaddy AUTH-HOOK: Created TXT record for ${CERTBOT_DOMAIN}.&amp;quot;
# Sleep to allow DNS propagation
sleep 60
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; If I have a subdomain or different domain structure, I adjust &lt;code&gt;RECORD_NAME&lt;/code&gt; accordingly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3-godaddy-cleanup-script&#34;&gt;3. GoDaddy Cleanup Script&lt;/h3&gt;
&lt;p&gt;This script (&lt;code&gt;godaddy-cleanup.sh&lt;/code&gt;) runs after verification succeeds. It removes (or resets) the &lt;code&gt;_acme-challenge&lt;/code&gt; TXT record, keeping my DNS tidy.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#!/usr/bin/env bash
# /etc/letsencrypt/scripts/godaddy-cleanup.sh
# Certbot environment variables:
# - CERTBOT_DOMAIN (the domain being authenticated)
GODADDY_KEY=&amp;quot;domain_name_provider_key&amp;quot;
GODADDY_SECRET=&amp;quot;domain_name_provider_secret&amp;quot;
GODADDY_DOMAIN=&amp;quot;your_root_domain&amp;quot;
RECORD_NAME=&amp;quot;_acme-challenge&amp;quot;
# Empty the TXT record (or remove it altogether)
DATA=&amp;quot;[]&amp;quot;
curl -s -X PUT \
-H &amp;quot;Authorization: sso-key ${GODADDY_KEY}:${GODADDY_SECRET}&amp;quot; \
-H &amp;quot;Content-Type: application/json&amp;quot; \
-d &amp;quot;${DATA}&amp;quot; \
&amp;quot;https://api.godaddy.com/v1/domains/${GODADDY_DOMAIN}/records/TXT/${RECORD_NAME}&amp;quot;
echo &amp;quot;GoDaddy CLEANUP-HOOK: Removed TXT record for ${CERTBOT_DOMAIN}.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;scheduling-with-crontab&#34;&gt;Scheduling With Crontab&lt;/h2&gt;
&lt;p&gt;After confirming the manual hooks work, I automate the renewal checks using crontab:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;10 0 * * * /usr/bin/certbot renew --preferred-chain &amp;quot;ISRG Root X1&amp;quot; &amp;gt;&amp;gt; /folder/to/save/cronlog.log 2&amp;gt;&amp;amp;1
10 0 * * * /etc/letsencrypt/scripts/certbot-renew-dns.sh &amp;gt;&amp;gt; /folder/to/save/cronlog-manualhook.log 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;pro-tips&#34;&gt;Pro Tips&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DNS Propagation&lt;/strong&gt;: Sometimes DNS changes can take longer than expected, especially if my DNS TTL is high. I might adjust my &lt;code&gt;sleep&lt;/code&gt; time or TTL in the script if validations fail.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Permissions&lt;/strong&gt;: I ensure my hook scripts are &lt;strong&gt;executable&lt;/strong&gt; by using &lt;code&gt;chmod +x /path/to/script.sh&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security&lt;/strong&gt;: I keep my API keys secret. Storing them in environment variables or a secure file is best.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Testing&lt;/strong&gt;: I run &lt;code&gt;certbot renew --dry-run&lt;/code&gt; to verify that my hooks and scripts work before scheduling them in production.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Using Certbot’s DNS challenge manual hook scripts, I can automate things, I never would have thought DNS provider would have full api access and are allowing acess to anyone who are buying domains.&lt;/p&gt;
&lt;p&gt;Merry Christmas &amp;amp; A Happy New Year, See ya soon~&lt;/p&gt;</description></item><item><title>Project IDX: A Look Into Google’s Cloud-Based Development Platform</title><link>//bluepie.in/2024/11/project-idx/</link><pubDate>Sun, 24 Nov 2024 21:14:29 +0000</pubDate><guid>//bluepie.in/2024/11/project-idx/</guid><description>
&lt;h1 id=&#34;introduction&#34;&gt;Introduction&lt;/h1&gt;
&lt;p&gt;I’ve been experimenting with &lt;a href=&#34;https://idx.dev/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Project IDX&lt;/a&gt; lately, and it’s quite an intriguing solution for cloud-based development. In essence, Project IDX gives you an always-available coding environment running on Google Cloud. As long as you keep the instance running and remain active, you effectively have a &lt;sup&gt;24&lt;/sup&gt;&amp;frasl;&lt;sub&gt;7&lt;/sub&gt; development machine at your disposal.&lt;/p&gt;
&lt;p&gt;I primarily use Project IDX for Java and front-end development on my personal projects. One of the coolest parts of my setup is using it with &lt;strong&gt;Samsung DeX&lt;/strong&gt;. By simply connecting a mobile device, opening Project IDX in the browser, and plugging in a keyboard and mouse, you can achieve a desktop-like workflow from anywhere.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;my-experience-with-project-idx&#34;&gt;My Experience with Project IDX&lt;/h2&gt;
&lt;h3 id=&#34;quick-start&#34;&gt;Quick Start&lt;/h3&gt;
&lt;p&gt;The onboarding process is straightforward: sign in with your Google account, spin up an IDX instance, and you’re off to the races. Under the hood, Project IDX uses Nix to manage packages and dependencies, allowing you to define your environment as code.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;System specs&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/nov2024/project-idx-htop.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;using-nix&#34;&gt;Using Nix&lt;/h3&gt;
&lt;p&gt;Nix is a functional package manager that ensures reproducible, declarative environments. Within Project IDX, you can configure all your tooling in a &lt;code&gt;dev.nix&lt;/code&gt; file:&lt;/p&gt;
&lt;p&gt;below is my actual config file from a project.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-nix&#34;&gt;{ pkgs, ... }: {
channel = &amp;quot;stable-24.05&amp;quot;;
packages = [
pkgs.docker-compose
pkgs.zulu17
pkgs.nodejs_20
pkgs.gradle
pkgs.htop
pkgs.sudo
pkgs.pnpm
pkgs.deno
pkgs.tmux
];
services.docker.enable = true;
services.postgres = {
enable = true;
};
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When your workspace initializes, Project IDX automatically installs and configures everything specified in this file. It’s fast, consistent, and eliminates the classic “it works on my machine” problem.&lt;/p&gt;
&lt;h3 id=&#34;ai-integration&#34;&gt;AI Integration&lt;/h3&gt;
&lt;p&gt;Project IDX is essentially a modified version of open-source VS Code, but with &lt;strong&gt;deep integration of Google’s AI&lt;/strong&gt;. You can use conversational prompts to perform tasks like creating files, refactoring code, or running commands. This isn’t just code suggestions—Project IDX can physically change files based on your instructions in the integrated chat window. It’s wild to see in action! when it actually works, it still needs work, it will only get better from here? so its okey I guess.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/nov2024/project-idx-usage-onproject-chat.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Even in the above image, when instructed to create a folder similar to an existing folder, it created the folder but the latest msg from the AI shows the command failed, the editor failed to parse the command. which resulted in an error. &amp;ldquo;user-management.scss&amp;rdquo;&lt;/p&gt;
&lt;h3 id=&#34;port-forwarding&#34;&gt;Port Forwarding&lt;/h3&gt;
&lt;p&gt;Forwarding ports is also streamlined. When you start up a development server—say, a Java Spring Boot app on port 8080—it automatically detects the listening port and allows you to expose it publicly or keep it private. This is great if you’re running multiple services, like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spring Reactor app on port 8080&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Front-end dev server on port 7173&lt;/li&gt;
&lt;li&gt;Database on a dedicated port (e.g., 5432 or 27017)&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;A database manager like Adminer runnin inside docker and exposes port on 8181
..etc&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This setup makes it simple to preview projects from any device or share them with collaborations.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/nov2024/open-ports-porject-idx.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;pros-and-cons-of-project-idx&#34;&gt;Pros and Cons of Project IDX&lt;/h2&gt;
&lt;h3 id=&#34;pros&#34;&gt;Pros&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cloud Accessibility&lt;/strong&gt;: No need for a powerful local machine; you can develop from virtually anywhere, even on a modest laptop or mobile device.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AI-Driven&lt;/strong&gt;: Built-in AI assistance (sometimes referred to as “Gemini AI”) can refactor code, generate boilerplate, or provide debugging tips.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Preconfigured Templates&lt;/strong&gt;: Supports a wide range of frameworks (React, Angular, Next.js, Flutter, Python, Go, etc.). You can quickly spin up a new project with minimal setup.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Collaboration Features&lt;/strong&gt;: Real-time collaboration (shared terminals, pair debugging) is ideal for remote teams.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nix-Based Customization&lt;/strong&gt;: Define your entire dev environment in a single file for reproducibility across projects.&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cons&#34;&gt;Cons&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Performance Limits&lt;/strong&gt;: As of now, the default VM specs (currently as of writing 8GB RAM, 2 CPU cores) can feel slow when running multiple services in running parallel (docker db service, db viewer, node-frontend..etc) and heavy IDE tasks (like Java code completion).&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Beta Uncertainties&lt;/strong&gt;: Project IDX is still in beta, so things can change. There’s no official SLA, and certain features could be introduced or deprecated.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pricing Future&lt;/strong&gt;: Currently free, but Google may charge for more powerful machines or advanced features down the road.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dependent on Internet&lt;/strong&gt;: You need a reliable internet connection. If you lose connectivity, you lose access to your dev environment.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Growing Ecosystem&lt;/strong&gt;: While extensions exist, it’s not as mature as traditional VS Code.&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;personal-takeaways&#34;&gt;Personal Takeaways&lt;/h2&gt;
&lt;p&gt;Despite occasional slowdowns—especially with Java’s language server—I find Project IDX to be &lt;strong&gt;fast and reliable&lt;/strong&gt; for quick tests and collaborative workflows. If your instance gets messed up, you can simply reset the VM. Your user storage partition remains intact, meaning you don’t lose any data.&lt;/p&gt;
&lt;p&gt;However, for heavier workloads or large multi-service applications, the 8GB RAM limit can become a bottleneck. If you find yourself needing more horsepower, you can request an increase from Google, but it’s not an automated process yet.&lt;/p&gt;
&lt;h3 id=&#34;final-thoughts&#34;&gt;Final Thoughts&lt;/h3&gt;
&lt;p&gt;For developers curious about cloud-based workstations, Project IDX is worth exploring. It balances the convenience of a full Linux environment in your browser with advanced AI-driven coding tools. With Nix managing your dependencies, your environment is reproducible, shareable, and straightforward to set up. While the platform isn’t perfect—still in beta, with performance and resource constraints—it’s a promising glimpse into the future of development.&lt;/p&gt;
&lt;p&gt;If you have any questions or experiences of your own, feel free to drop a comment or reach out. Happy coding!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;References &amp;amp; Further Reading&lt;/em&gt;&lt;br /&gt;
- &lt;a href=&#34;https://idx.dev/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Official Project IDX Website&lt;/a&gt;&lt;br /&gt;
- &lt;a href=&#34;https://developers.google.com/idx/guides&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Project IDX Developers Guide&lt;/a&gt;&lt;br /&gt;
- &lt;a href=&#34;https://nixos.org/manual/nix/stable/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Nix Official Documentation&lt;/a&gt;&lt;br /&gt;
- &lt;a href=&#34;https://community.idx.dev/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Project IDX Community Forum&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;(Note: All information is based on personal experience and available details as of November 2024. Features and pricing may change as Project IDX evolves.)&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;personal-update-thoughts-on-life-edited-updated-on-jan24-2025&#34;&gt;Personal Update (Thoughts on Life (edited/updated on jan24/2025))&lt;/h2&gt;
&lt;p&gt;Sometimes, life presents crossroads where you wonder if it’s better to step aside so someone else can be happier—even if it stings. Is that genuine sacrifice, or is it avoidance? The line can be blurry, but the hope is that such tough decisions lead to growth or peace for everyone involved.&lt;/p&gt;
&lt;p&gt;I’m planning for a bit of rest and enjoyment in December—a week unplugged from the world’s noise (work..).&lt;/p&gt;
&lt;hr /&gt;</description></item><item><title>Rooting My Pixel For Unlimited gphotos backup</title><link>//bluepie.in/2024/04/rooting-my-pixel/</link><pubDate>Thu, 04 Apr 2024 03:14:06 +0000</pubDate><guid>//bluepie.in/2024/04/rooting-my-pixel/</guid><description>
&lt;p&gt;All the previous android phones I had, I rooted them and used them with a custom ROM that had gphotos mod or used it with gphotos mod, I&amp;rsquo;ve had a pixel for android development as my second device..but all this time, it had stock android and not rooted with no modifications.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;But what do I mean by gphotos mod..?
You get unlimited photos and videos backup in Google photos, the mod makes it seem like you&amp;rsquo;re using a pixel device. But I already have a pixel device..?.. Google previously had announced that their pixel phones will have unlimited backup, but they reverted this decision after thier initial announcement.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;click image to enlarge&lt;/em&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/pixel-unlimited-photos-google-help.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;google-pixel-phone-storage-offers&#34;&gt;Google Pixel Phone Storage Offers&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Pixel Model&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Unlimited Storage Offer&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Details&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Original Pixel&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Unlimited Original quality (free)&lt;/td&gt;
&lt;td&gt;No limits on photo and video storage.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Pixel 2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Unlimited Original quality (free)&lt;/td&gt;
&lt;td&gt;Applies only to photos and videos taken before January 16, 2021.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Pixel 3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Unlimited Original quality (free)&lt;/td&gt;
&lt;td&gt;Applies only to photos and videos taken before January 31, 2022.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Pixel 3a and onwards&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Not available&lt;/td&gt;
&lt;td&gt;Instead, offers a 3-month trial for the 100 GB Google One plan (Pixel 4, 4a, 4a (5G), Pixel 5&amp;hellip;.etc)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;google-photos-storage-policy-changes&#34;&gt;Google Photos Storage Policy Changes&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Date&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Change&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Impact&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;November 2020&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Announced end of free unlimited storage for High quality and Express quality starting June 1, 2021&lt;/td&gt;
&lt;td&gt;Users must use Storage saver or Original quality; new photos count towards the user&amp;rsquo;s shared storage quota.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;June 1, 2021&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Renamed &amp;ldquo;High quality&amp;rdquo; to &amp;ldquo;Storage saver&amp;rdquo;&lt;/td&gt;
&lt;td&gt;Existing photos remain unaffected; new uploads consume storage quota across Google Drive, Gmail, and Photos.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Post-June 1, 2021&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Pixel smartphone owners up to Pixel 5 remain exempt from the storage changes&lt;/td&gt;
&lt;td&gt;Owners can continue enjoying unlimited Original quality storage despite the policy changes.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;click image to enlarge&lt;/em&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/wikipedia-google-photos-storage.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;If you read the support page or the wikipedia or any source, it is clear that you get original quaility backups for free for the original pixel device, which is the first pixel device, though im having a new pixel device if I emulate the first pixel device, I can get unlimited storage.&lt;/p&gt;
&lt;h3 id=&#34;rooting-magisk&#34;&gt;Rooting &amp;amp; Magisk&lt;/h3&gt;
&lt;p&gt;Back in 2015.. along those times. Rooting was mainly SuperSU, you install a custom recovery and flash SuperSU, or install an apk like (kingRoot..or something similar..there was a long list, I remember this just because of the name, easy to remember). The apk way to root is bascailly the app tries the known os vulnerabilities to do previlege escaltion for that specific android version. Then you would have superSU installed on the device and use the app to grant permissions to any app that uses it. Some of the apps that I&amp;rsquo;ve used are app2sd, titanium backup, (backup any app with data)..2:22am and having hard time remembering the apps that i&amp;rsquo;ve used over the years.. those were the days, have fond memories now.&lt;/p&gt;
&lt;p&gt;Nowadays there&amp;rsquo;s just one main way.. and that is to use Magisk.&lt;/p&gt;
&lt;p&gt;To install magisk, follow the &lt;a href=&#34;https://topjohnwu.github.io/Magisk/install.html&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;magisk official docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For my device, which is a pixel, I need to get the original &lt;code&gt;boot&lt;/code&gt; img of the current firmware version I have, this we can check in About Phone or notification shade in android 13 and above(could be from before.. started noticing only it from then on). (&lt;a href=&#34;https://developers.google.com/android/images#lynx&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Official pixel images&lt;/a&gt;) Once I downloaded the zip, extracted it and found the boot img, I then followed the following instructions from official manual.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;click image to enlarge&lt;/em&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/patched_img_instructions.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;bluepie@dev-machine pixel backup % adb reboot bootloader
bluepie@dev-machine pixel backup % fastboot flashing unlock
OKAY [ 0.039s]
Finished. Total time: 0.039s
bluepie@dev-machine pixel backup % adb reboot bootloader
bluepie@dev-machine pixel backup % fastboot flashing unlock
OKAY [ 0.006s]
Finished. Total time: 0.006s
bluepie@dev-machine pixel backup % fastboot flash init_boot magisk_patched-27000_EyWu8.img
fastboot: error: cannot load &#39;magisk_patched-27000_EyWu8.img&#39;: No such file or directory
bluepie@dev-machine pixel backup % cd ..
bluepie@dev-machine Desktop % cd ..
bluepie@dev-machine ~ % fastboot flash init_boot magisk_patched-27000_EyWu8.img
Sending &#39;init_boot_b&#39; (8192 KB) OKAY [ 0.211s]
Writing &#39;init_boot_b&#39; OKAY [ 0.014s]
Finished. Total time: 0.228s
bluepie@dev-machine ~ % fastboot reboot
Rebooting OKAY [ 0.000s]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once Magisk is installed and on reboot, you will see warning image that bootloader is unlocked saying device is insecure (which is true),&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/april2024/magisk.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;install-software-for-gphotos&#34;&gt;Install software for Gphotos&lt;/h3&gt;
&lt;p&gt;Once Magisk is installed and phone is rooted, we need something called &lt;a href=&#34;https://github.com/rovo89/Xposed&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Xposed&lt;/a&gt; (it exposes/ enables/ writes ways for us to modify certain parts of the system by exposing them as API). Back.. early days Xposed was the king..(its archived and other projects took over). One such is &lt;a href=&#34;https://github.com/LSPosed/LSPosed&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;LSPosed&lt;/a&gt; (but this only works till Android 13, again project archived). There is a fork of the lsposed which gives support for android 14. Since as of writing this.. I&amp;rsquo;m on Android 14..and this android version.. i.e. latest android 14..is not supported by lspoed because its archived by that point, so I&amp;rsquo;ll be flashing the latest lsposed &lt;a href=&#34;https://github.com/re-zero001/LSPosed-Irena&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;v1.9.2&lt;/a&gt; inside magisk. Once installed..reboot the device. Now you have lsposed installed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/april2024/lsposed.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;pixelify-gphotos&#34;&gt;Pixelify gphotos&lt;/h3&gt;
&lt;p&gt;The reason why we do all this because, for pixelify gphotos (to enable unlimited photos &amp;amp; video uploads), we need to install magisk and have lsposed (as of android 14). Just install the module and enable it for Google photos and reboot. Open the Pixelify gphotos app and set to spoof Pixel XL devices, thats the last step.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/april2024/pixelify-gphotos.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;Get unlimited backups until this is patched.. I know irl friends that use this to upload xx gbs of photos. I&amp;rdquo;ve used before, since now that I enabled this, gonna upload all my photos from the gap (3 years of not using this) to backup using this mod.&lt;/p&gt;
&lt;p&gt;Photos uploaded through this mechanism do not take space on the account.&lt;/p&gt;
&lt;div style=&#34;display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/photos-backed-up-for-free.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/magisk_modules.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;
&lt;img src=&#34;//bluepie.in/images/posts/april2024/spoof_logs.png&#34; alt=&#34;&#34; style=&#34;height:480px;&#34;&gt;
&lt;/div&gt;
&lt;p&gt;Couple of other cool things with Xposed, can emulate an unrooted device with patches and make banking apps work, but I have a separate phone just for that. This pixel is just for development and photos backup (additional bonus)&lt;/p&gt;
&lt;h3 id=&#34;personal-update&#34;&gt;Personal update&lt;/h3&gt;
&lt;p&gt;I&amp;rsquo;ve been slipping on my dreams.. though I am happy on some parts of my life, &lt;!-- I found a special person, It happened in the new office, we were strangers first, I did not want to know them.. or wanted to have anything with them, then we became friends over video games and guitar, we became close friends over the months, then on feb 2024, we got together. Knowing we couldn&#39;t be together..I started to erase her in my life..how I did other, but she confronted me and got me into 2 days of love.. then asked for additional two days.. then additional 6 months, I asked what&#39;s after 6 months. she said.. that my birthday was in 6 months..(august 29). I gotta get back to the groove. --&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Whispers Between Strings&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a place of new beginnings, under fluorescent glow,
I crossed paths with a soul I thought I’d never know.
A stranger in the crowd, I turned the other way,
No intentions in my heart for friendship’s gentle sway.&lt;/p&gt;
&lt;p&gt;But fate had strings to strum, and games for us to play,
Through chords and pixels bright, we whiled hours away.
From strangers into friends, we wove a silent thread,
Months unfolded softly, with every word unsaid.&lt;/p&gt;
&lt;p&gt;Come February’s whisper, we stepped across the line,
Entangled in a moment, pretending all was fine.
Yet shadows loomed around us, a truth we couldn’t flee,
I tried to fade her presence, like footprints in the sea.&lt;/p&gt;
&lt;p&gt;But she held on with courage, refused to let it end,
“Just two more days,” she pleaded, “let hearts begin to mend.”
Then days turned into months, six circles ‘round the sun,
“What happens when time’s up?” I asked. She said, “We’ve just begun.”&lt;/p&gt;
&lt;p&gt;“Your birthday marks the turning,” she smiled with knowing eyes,
A hint of something deeper, a plan beneath disguise.
Now time’s a path before me, with rhythm to approve,
It’s time to find my footing, and get back in the groove.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Echoes in the Labyrinth&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In the maze of new beginnings, I walked alone,
Content with solitary paths, untraveled and unknown.
But whispers of a melody, a song of strings and play,
Lured me toward a crossroads on an unexpected day.&lt;/p&gt;
&lt;p&gt;A fellow traveler appeared, with laughter in her eyes,
We danced through hidden corridors beneath the open skies.
With every game and note we shared, the walls began to fade,
The labyrinth seemed less daunting, its edges softly frayed.&lt;/p&gt;
&lt;p&gt;As winter turned to springtime, our footsteps fell in rhyme,
We found a secret clearing, a moment out of time.
But shadows loomed to tell us that our paths were not the same,
I tried to turn away to where no memory spoke her name.&lt;/p&gt;
&lt;p&gt;Yet she reached out and held my gaze, “Just stay a little more,”
Two days became a promise, then extended to a score.
“What’s beyond these winding trails?” I asked beneath the moon.
She smiled, “A new horizon comes with August’s afternoon.”&lt;/p&gt;
&lt;p&gt;Now the maze feels less confining, each step a subtle groove,
Embracing twists and turns ahead, I find my feet can move.
For in this intricate design, where every choice is free,
I’m learning that the journey means as much as destiny.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Letter to the Universe:&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Dear Universe,&lt;/p&gt;
&lt;p&gt;I didn’t plan for this convergence of souls. In the hustle of new surroundings, I was content navigating alone, charting my course without expectation. Then, unexpectedly, someone entered my orbit—a bright comet against the night sky of routine.&lt;/p&gt;
&lt;p&gt;We connected over shared joys: the strategic thrill of games, the harmony of strings vibrating in unison. These simple pleasures wove threads between us, creating a tapestry I hadn’t anticipated.&lt;/p&gt;
&lt;p&gt;As time flowed, our paths aligned more closely than I thought possible. Yet, knowing the stars might pull us in different directions, I tried to drift away, to return to the solitude I once knew. But she reached out, her resolve unwavering, asking me to remain—not forever, just a little longer.&lt;/p&gt;
&lt;p&gt;“Stay for two more days,” she said, and then, “Let’s see where six months takes us.”&lt;/p&gt;
&lt;p&gt;“What’s at the end of that journey?” I wondered.&lt;/p&gt;
&lt;p&gt;She hinted at a milestone—my own revolution around the sun, a birthday that could mark new beginnings.&lt;/p&gt;
&lt;p&gt;So here I stand, Universe, open to the possibilities you lay before me. I don’t know where this path leads, but perhaps that’s the point of the journey. I’m ready to embrace the rhythm you’ve set, to find my place within the greater symphony.&lt;/p&gt;
&lt;p&gt;Guide me as I step back into the groove of life’s unfolding melody.&lt;/p&gt;
&lt;p&gt;With cautious hope,&lt;/p&gt;
&lt;p&gt;A Wanderer&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>My Stab at Using Ai for Productivity</title><link>//bluepie.in/2024/02/my-stab-at-using-ai-for-productivity/</link><pubDate>Tue, 20 Feb 2024 21:56:24 +0000</pubDate><guid>//bluepie.in/2024/02/my-stab-at-using-ai-for-productivity/</guid><description>
&lt;h2 id=&#34;my-ai-usecases&#34;&gt;My ai usecases&lt;/h2&gt;
&lt;h2 id=&#34;purchasing-ai-using-it-as-api-vs-monthly-subscription-for-chatgpt-claude&#34;&gt;Purchasing AI - Using It as API vs Monthly Subscription for ChatGPT/Claude&lt;/h2&gt;
&lt;p&gt;Do you need to buy monthly subscriptions? Take Copilot and other examples. To test this out, I bought $5 worth of usage from OpenAI, used an extension for VSCode for ai  operations, and used ai tools that require api token..like AI Commits. Did it work? Yes. Have I used all of those $5? No, it&amp;rsquo;s still there. Usually, the models I use for these kinds of tasks are very affordable and don&amp;rsquo;t accumulate significant costs.&lt;/p&gt;
&lt;p&gt;At the time of updating this post, the pricing is as follows (I&amp;rsquo;ve updated the following as of November 2, 2024):&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Model Pricing Overview&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Model&lt;/th&gt;
&lt;th&gt;Pricing&lt;/th&gt;
&lt;th&gt;Pricing with Batch API*&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;gpt-4o-mini&lt;/td&gt;
&lt;td&gt;$0.150 / 1M input tokens&lt;/td&gt;
&lt;td&gt;$0.075 / 1M input tokens&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;$0.075 / 1M cached** input tokens&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;$0.600 / 1M output tokens&lt;/td&gt;
&lt;td&gt;$0.300 / 1M output tokens&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gpt-4o-mini-2024-07-18&lt;/td&gt;
&lt;td&gt;$0.150 / 1M input tokens&lt;/td&gt;
&lt;td&gt;$0.075 / 1M input tokens&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;$0.075 / 1M cached** input tokens&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;$0.600 / 1M output tokens&lt;/td&gt;
&lt;td&gt;$0.300 / 1M output tokens&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;1M - 1Million, yea, there should be no pricing..but that pricing is low right??&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Following is the usage for a month, the usage does not exceep any high numbers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/feb-api-usage.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;If you want to use AI, you don&amp;rsquo;t have to pay monthly. You can just buy API usage for $5 and start from there. That&amp;rsquo;s my current verdict, though it could change in the future&lt;/p&gt;
&lt;h2 id=&#34;goal&#34;&gt;Goal&lt;/h2&gt;
&lt;p&gt;To test whether AI increases productivity or not. I started using it and I have couple of workflows, let see one by one.&lt;/p&gt;
&lt;h2 id=&#34;an-assistant-for-api-syntax-and-docs&#34;&gt;An Assistant for API Syntax and docs&lt;/h2&gt;
&lt;p&gt;An assistant that just gives the command out for common usecases, these are stuff that I nornally would google and take some tiem doing the same, here I jsut ahve a static window open with custom instruction, if you have used chatgpt or claude or any other ai chatbots. it yaps a lot, or give unnecessary explanations.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/chat-apt-api-window.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ll open this floating sticky window to my desktop and I&amp;rsquo;ll start coding/ imeplenting what I needed to do, when doubts, I just type in this window ,I get answers. I wont ask anything I wont&amp;rsquo; know, I just ask stuff which i already know but dont remember. I wouldn&amp;rsquo;t recommend using output from this directly without research.&lt;/p&gt;
&lt;h2 id=&#34;zed&#34;&gt;Zed&lt;/h2&gt;
&lt;p&gt;I&amp;rsquo;ve been using &lt;a href=&#34;https://zed.dev&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;zed&lt;/a&gt;, I have configured it with open AI key and I can use these features with the help of this.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;inline-ai&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/zed-inline-ai.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;chat window&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/ai-chat-window-with-different-features.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;model selection&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/model-selection.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;git-helper&#34;&gt;Git helper&lt;/h2&gt;
&lt;p&gt;I&amp;rsquo;ve been using ai commits, configuring in terminal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/aicommits.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve stopped using ai commits, cuz a chatgpt window with custom instructions in much btter than this.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/git_commit_message_helper.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Again if you notice, chatgpt doesnot spew any additional information, its fed with instructions as should only give git commit messages. I just copy pasted the rules from this page &lt;a href=&#34;https://www.conventionalcommits.org/en/v1.0.0/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;conventional commits.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Again all these are open source projects of mine, so im pasting my git diff into it.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# im using mac, for copying to clipboard pbcopy
git diff --staged | pbcopy
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;advanced-find-in-page-helper&#34;&gt;Advanced find in page helper&lt;/h2&gt;
&lt;p&gt;This is powerful&amp;hellip;maybe its bad longterm? idk.. before I have to learn entire docs to find a specific information if I can&amp;rsquo;t find it with keywords with find in page. &lt;em&gt;NOW WE CAN SEARCH THE CONTENT WITH LOGIC, WITHOUT EXACT WORDS&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;what to do achive this? First select all content of the page and give it instructions to specifically find a info using logic, tell it to use information only provided in the content.&lt;/p&gt;
&lt;p&gt;See the example below, it greatly reduces my time for implementing and learning items.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/advanced_find_in_page.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;phrases-english-helper&#34;&gt;Phrases - English - Helper&lt;/h2&gt;
&lt;p&gt;Self explanatory, I hear a lot of phrases from tv shows, utube, needed a explainer with custom instructions of using that in 2 sentences.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/feb2024/phraes-english-helper.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;There should be a continuation..to the post. obviously when I use more and more..I&amp;rsquo;ll find more stuff.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;You can create ai assistant based on your needs to reduce your time working on things and increase your productivity.. these are the usecases I find for now.. should find more ones in future.&lt;/p&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;Personal update&lt;/h2&gt;
&lt;p&gt;Found another frost, getting a lot of life experiences.. I know it will not work between surroundings and struggles for future, deciding on august 29th, hopefully they understand.. still want entire life. Suggestion from frost 2 is just live in the moment and enjoy?. Future me.. tell me how it is going?.. remember feb 2024?. Good luck, stay positive and have a little bit of hope!.&lt;/p&gt;</description></item><item><title>Creating and Publishing Chrome Extension in Chrome Store</title><link>//bluepie.in/2024/01/creating-and-publishing-chrome-extension-in-chrome-store/</link><pubDate>Wed, 03 Jan 2024 14:31:56 +0000</pubDate><guid>//bluepie.in/2024/01/creating-and-publishing-chrome-extension-in-chrome-store/</guid><description>
&lt;h2 id=&#34;why-motivation&#34;&gt;Why &amp;amp; Motivation&lt;/h2&gt;
&lt;p&gt;Wanted an adblocker for accuradio website, I just need to silence the ads on this website. How can it be done? Custom script that get injected into the page by some extensions such as tamper monkey, the disadvantage is u gotta install tamper monkey. The other idea I have in my brain is I Wanted to try out chrome extesnion that specifically does this job, since my current work needs me work on chrome extensions.&lt;/p&gt;
&lt;p&gt;Wanted to do for a while, the ads on accuradio is annoying, I wanted to write a script to block it, i wanted to just install it and be done with it. Even if I use a new machine/laptop.. i dont have to set it up or anything, just install the extension and use the website.&lt;/p&gt;
&lt;h2 id=&#34;how-chrome-extensions-work&#34;&gt;How chrome extensions work&lt;/h2&gt;
&lt;p&gt;How to publish chrome extenision, how chrome extensions work? why they are necessary?&lt;/p&gt;
&lt;p&gt;Chrome extensions are essentially web apps that use web technologies but are limited to the Chrome browser. They run in a sandboxed environment, ensuring they don&amp;rsquo;t interfere with the webpage content unless explicitly designed to do so.&lt;/p&gt;
&lt;p&gt;Background Scripts: Handle the behind-the-scenes logic, such as listening for specific browser events.&lt;/p&gt;
&lt;p&gt;Content Scripts: Injected into web pages to modify their content or behavior.
Popup HTML: Defines the UI, which appears when users click the extension icon.
Extensions: communicates with web pages through messages and shared storage, maintaining separation while enabling interaction.&lt;/p&gt;
&lt;h2 id=&#34;to-publish-new-extensions&#34;&gt;To publish new extensions&lt;/h2&gt;
&lt;p&gt;To publish a Chrome extension, we must create a developer account on the Google Chrome Web Store. As of writing this post, Google requires a one-time registration fee of 5 USD for setting up this account. This fee is intended to verify the developer&amp;rsquo;s identity and to discourage spam and fraudulent extensions on the platform.&lt;/p&gt;
&lt;h3 id=&#34;extension-code&#34;&gt;Extension code&lt;/h3&gt;
&lt;p&gt;Extension code that is responsible to detect the ads on the page.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt; observer = new MutationObserver((mutations) =&amp;gt; {
mutations.forEach((mutation) =&amp;gt; {
// filter the target to contain only if it is adPlaying or not
if (
mutation &amp;amp;&amp;amp;
mutation.target &amp;amp;&amp;amp;
mutation.target.cloneNode().classList &amp;amp;&amp;amp;
mutation.target.classList.contains(&amp;quot;adPlaying&amp;quot;)
) {
// mute the tab
} else {
if (chrome &amp;amp;&amp;amp; chrome.runtime) {
// unmute the tab
}
}
});
});
observer.observe(accuradioPlayerControls, {
attributes: true,
});
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When creating Chrome extensions, it&amp;rsquo;s crucial to handle permissions carefully. Given that Chrome is designed with a robust focus on security and user privacy, any extension listed on the Chrome Web Store is required to request only the permissions essential for its functions. The principle of &amp;ldquo;minimum necessary privileges&amp;rdquo; is not just a best practice in security; it is a fundamental requirement. This principle dictates that an extension should operate with the least amount of privileges it needs to function properly.&lt;/p&gt;
&lt;p&gt;I had this happen to me, more permission than I actaully needed, so my first submission was rejected, but then I re-submitted with the permissions fine grained, it got approved.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/jan2024/chrome-store-rejection.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;link-to-chrome-extension&#34;&gt;Link to chrome extension:&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://chromewebstore.google.com/detail/mute-audio-ads-on-website/lhgmlkkpdhcgenmglmbomhemkkgccjef&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;https://chromewebstore.google.com/detail/mute-audio-ads-on-website/lhgmlkkpdhcgenmglmbomhemkkgccjef&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;personal-update&#34;&gt;Personal update:&lt;/h3&gt;
&lt;p&gt;Brought my mom to chennai; im getting home food again. close friend left to hometown. Mom asking me to buy stuff for the new home; so doing that. Going pretty well~&lt;/p&gt;</description></item><item><title>How I Set Up Nginx and SSL for My Media Server and Torrent</title><link>//bluepie.in/2023/12/how-i-configure-nginx-for-my-server-and-torrent/</link><pubDate>Thu, 07 Dec 2023 20:49:16 +0000</pubDate><guid>//bluepie.in/2023/12/how-i-configure-nginx-for-my-server-and-torrent/</guid><description>
&lt;h2 id=&#34;context&#34;&gt;Context&lt;/h2&gt;
&lt;p&gt;This post is a nginx configurations of my &lt;a href=&#34;https://bluepie.in/2023/11/self-hosted-netflix-replacer/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;How I replaced Netflix and started using my media server for over 2 years now&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;config of jellyfin&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We already run jellyfin inside podman and expose the service on port 8096, so we use nginx to handle requests to domain &amp;lsquo;media.bluepie.in&amp;rsquo;, which connects to jellyfin podman instance.&lt;/p&gt;
&lt;p&gt;I point my domain (through domain provider) to the ip address of the server im running my jellyfin instance, then use nginx to serve the requests, the nginx configs are located inside config folders and are included in main file.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Setting Up Nginx (Reminder for me, others ignore)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install Nginx.&lt;/li&gt;
&lt;li&gt;Then, make a config file in the conf.d folder. I use one config file for each domain and add it to the main Nginx config with /etc/nginx/conf.d/*.conf&lt;/li&gt;
&lt;li&gt;Check Nginx config: &lt;code&gt;nginx -t&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Restart Nginx: &lt;code&gt;sudo service nginx restart&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Reload Nginx: &lt;code&gt;sudo service nginx reload&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Config file for media server&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt; server {
server_name media.bluepie.in;
location / {
proxy_pass http://127.0.0.1:8096;
proxy_pass_request_headers on;
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Forwarded-Protocol $scheme;
proxy_set_header X-Forwarded-Host $http_host;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection $http_connection;
proxy_buffering on;
proxy_redirect / / ;
proxy_cookie_path / /;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;config of torrent&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instead of maintaining a separate domain for running qBittorrent, I utilize the main domain but with the &amp;lsquo;/torrent/&amp;rsquo; prefix. To enhance security and prevent others from accessing it, I implement two layers of protection: HTTP basic authentication. For this purpose, a new .htpasswd file is created and linked with Nginx for handling HTTP basic login before accessing qBittorrent. After the initial login to qBittorrent, the username and password are configured. Subsequently, during subsequent logins, users will be prompted for HTTP basic authentication first and then for qBittorrent authentication.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Creating a .htpasswd File for Authentication:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;(self note: The auth_basic and auth_basic_user_file directives are built-in and don&amp;rsquo;t require any extra modules)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Creation:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;htpasswd -c /etc/nginx/.htpasswd &amp;lt;username&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Subsequently, specify its usage in Nginx:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;auth_basic &amp;quot;Restricted Access&amp;quot;;
auth_basic_user_file /etc/nginx/.htpasswd;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Config to be added to main nginx config&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt; location /torrent/ {
proxy_pass http://127.0.0.1:8181/;
proxy_set_header Host $host;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection upgrade;
proxy_set_header Accept-Encoding gzip;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Forwarded-Port $server_port;
auth_basic &amp;quot;restricted space&amp;quot;;
auth_basic_user_file /etc/nginx/.htpasswd;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!-- - ssl config for all sites, including a bounds dns, tell that I should automate based on godaddy api. --&gt;
&lt;p&gt;I automate SSL certificate renewals across my devices with Certbot, ensuring secure, uninterrupted service without manual oversight. The heart of this automation is a daily cron job configured to run Certbot&amp;rsquo;s renewal command, specifically opting for the &amp;ndash;preferred-chain &amp;ldquo;ISRG Root X1&amp;rdquo; to ensure broad compatibility (particularly for setting up custom DNS servers on Android devices that are operating on version 10 or higher). Here&amp;rsquo;s the crux of the setup:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
10 0 * * * /usr/bin/certbot renew --preferred-chain &amp;quot;ISRG Root X1&amp;quot; &amp;gt;&amp;gt; /home/&amp;lt;user&amp;gt;/cronlog.log 2&amp;gt;&amp;amp;1
# The schedule 10 0 * * * means the task will run at 12:10 AM every day server time.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This approach leverages the reliability of cron for scheduling and Certbot for execution, automating the renewal process and logging outcomes for easy monitoring. It&amp;rsquo;s a streamlined, efficient method.&lt;/p&gt;
&lt;h3 id=&#34;an-insight-into-dns-renewal-challenges-unrelated-to-jellyfin-or-qbittorrent&#34;&gt;An Insight into DNS Renewal Challenges (Unrelated to Jellyfin or qBittorrent)&lt;/h3&gt;
&lt;!-- usually a tmux shell is running tmux ls
- login to server
- check cronlog.log in home directory
-I wrote for myself, found inside adguard
certbot certonly --manual --preferred-challenges=dns --preferred-chain=&#34;ISRG Root X1&#34;
- certificate for dns.bluepie.in, media.bluepie.in,uat.bluepie.in will automatically renew.
- have to manually renew the certificate for *.dns.bluepie.in
- certificates are stored in /etc/letsencrypt/live/dns.bluepie.in-0001
- copy the pri.pem &amp; fullchain.pem to /home/opc/adguard/conf
::raw_log_start::
[root@instance-20220718-0253 dns.bluepie.in-0001]# certbot certonly --manual --preferred-challenges=dns --preferred-chain=&#34;ISRG Root X1&#34;
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Please enter the domain name(s) you would like on your certificate (comma and/or
space separated) (Enter &#39;c&#39; to cancel): *.dns.bluepie.in
Renewing an existing certificate for *.dns.bluepie.in
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please deploy a DNS TXT record under the name:
_acme-challenge.dns.bluepie.in.
with the following value:
fWQdh1jwhPtKe8Wz1NMaX2dhNt_a2Rd4iM_pYZjTIHo
Before continuing, verify the TXT record has been deployed. Depending on the DNS
provider, this may take some time, from a few seconds to multiple minutes. You can
check if it has finished deploying with aid of online tools, such as the Google
Admin Toolbox: https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.dns.bluepie.in.
Look for one or more bolded line(s) below the line &#39;;ANSWER&#39;. It should show the
value(s) you&#39;ve just added. --&gt;
&lt;p&gt;Every time I want to renews the whildcard DNS domain (i.e) *.dns.bluepie.in, I start with logging in and checking the cronlog.log in my logs Directory. This log helps me keep track of the automated renewals for all services running in that server.&lt;/p&gt;
&lt;p&gt;This setup works well for most of my domains, automatically renewing their certificates. However, there&amp;rsquo;s a catch with the wildcard domain *.dns.bluepie.in which requires a manual renewal process every two months. After renewing, I manually move the private key and pem files do dns service so that it can read and update the certificates.&lt;/p&gt;
&lt;p&gt;The manual part involves adding a DNS TXT record for _acme-challenge.dns.bluepie.in. and waiting for it to be verified. This process, although straightforward, is a bit of a hassle because it can&amp;rsquo;t be automated with my current setup. After updating the DNS record, I always double-check to make sure it&amp;rsquo;s correctly deployed using the Google Admin Toolbox: &lt;a href=&#34;https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.dns.bluepie.in&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.dns.bluepie.in&lt;/a&gt;. This tool confirms the record is live, which is crucial before proceeding with the certification.&lt;/p&gt;
&lt;p&gt;The Google Admin Toolbox, specifically the &amp;ldquo;Dig&amp;rdquo; tool, is a web-based version of the Unix dig command, which I often use for DNS verification. This tool is part of a suite designed to troubleshoot Google Workspace services and is particularly handy for checking DNS record propagation, such as the TXT records required for SSL certificate validation. I use this tool to confirm that the record is correctly propagated across the DNS system. This step is crucial because the validation of SSL certificates by Let&amp;rsquo;s Encrypt (or any other certificate authority that supports DNS-01 challenge). For more detailed functionalities and tools, you can explore the toolbox directly at &lt;a href=&#34;https://toolbox.googleapps.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;toolbox.googleapps.com​&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been thinking about solving this issue by integrating with the GoDaddy API for DNS wildcard renewal. Doing this would remove the need for manual intervention every two months, making the process smoother and fully automated. It&amp;rsquo;s definitely something I plan to work on in the future to streamline my server management tasks.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;personal-update&#34;&gt;Personal Update&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This section typically opens each of my posts, a tradition spanning many years. However, I&amp;rsquo;ve decided it might be better placed at the end moving forward.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve begun to engage heavily with LeetCode this year, a detail I haven&amp;rsquo;t shared in my posts. So, in case future me forgets, I&amp;rsquo;m jotting it down here for remembrance. Remember &lt;a href=&#34;https://adventofcode.com/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;AOC&lt;/a&gt;, which I previously tackled in 2020 and maintained a GitHub repo &lt;a href=&#34;https://bluepie.in/2020/12/adventofcode-2020/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;? I&amp;rsquo;ve opted to take it on this year as well. Yes, even though my plate is overflowing, I&amp;rsquo;ve decided to add this to my queue&amp;hellip; I know, :facepalm:.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve leased a new place in Chennai (Mugalivakkam), roughly 6 kilometers from my current office. It&amp;rsquo;s a 2BHK flat with parking facilities. I moved in, stating that it would be a family residence, with plans for my parents to join me. This decision came after a series of abrupt changes. Initially, I had a different plan in mind, but it&amp;rsquo;s funny how things evolve up to the last moment. My friend from the police force, with whom I&amp;rsquo;ve lived since after COVID and who recently got posted in Chennai after passing his exams, is a close friend. So, despite only needing to be in the Chennai office two days every two weeks (totalling four days a month) and despite the office policy changing around August/September to require my presence two days every week, I opted for a permanent stay over the convenience of crashing at a friend&amp;rsquo;s place. My decision was influenced by several factors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;My close friend, who I&amp;rsquo;ve known for eight years (time really flies), got a posting in Erode and plans to move out in December 2024. He had his transfer announced just before Diwali in 2023.&lt;/li&gt;
&lt;li&gt;Parents take care of me, homemade food, household chores, them being atpeace without worring seeing me everyday.&lt;/li&gt;
&lt;li&gt;The home-like setup for productivity and peace of mind.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&amp;rsquo;m writing this update after December, so for me, December is already in the past. I&amp;rsquo;ve been sick and bedridden over Christmas, alone since my friends and family were in their hometowns, including my parents. Despite my mother&amp;rsquo;s insistence on coming over as soon as possible because of my neglect towards self-care and healthy eating, I plan to bring them here in January after Pongal 2024. This is another reason I chose an individual house over sharing a space with friends, opting for a PG, or having a flatmate.&lt;/p&gt;</description></item><item><title>How I Replaced Netflix and Have Been Using My Media Server for Over 2 Years</title><link>//bluepie.in/2023/11/self-hosted-netflix-replacer/</link><pubDate>Sun, 19 Nov 2023 21:55:10 +0000</pubDate><guid>//bluepie.in/2023/11/self-hosted-netflix-replacer/</guid><description>
&lt;!-- There are telegram groups - prabh story buy things from sotre 50 rupees per month. --&gt;
&lt;h2 id=&#34;feasibility&#34;&gt;Feasibility&lt;/h2&gt;
&lt;p&gt;Can I host Netflix on my own? of course yes, many open source software offers similar functionality, you can set it to work only inside your home network or make it available throughout the internet.&lt;/p&gt;
&lt;p&gt;I already own a server, I rent out a server for hosting my development activities, so why not use that server as a media server, I don&amp;rsquo;t want it to run just inside the home LAN, I want it to be exposed to the internet, of course with required security measures.. if its open others can access it.&lt;/p&gt;
&lt;h2 id=&#34;what-i-need&#34;&gt;What I need&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Media server, there are many to choose from using a quick Google search, I&amp;rsquo;ve chosen &lt;a href=&#34;https://github.com/jellyfin/jellyfin&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Jellyfin&lt;/a&gt;, as it has all the features I need.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Application to download, media to the server, i.e. torrent client. &lt;a href=&#34;https://github.com/qbittorrent/qBittorrent&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Qbittorrent-nox&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That&amp;rsquo;s all you ask&amp;hellip;? Yeah, I was surprised too. anyway I know I need these two software, but how am I going to install and run them on my server?&lt;/p&gt;
&lt;!-- 12:06 AM12:06 AM --&gt;
&lt;h3 id=&#34;installation&#34;&gt;Installation&lt;/h3&gt;
&lt;p&gt;The choice here would be to use docker/podman because it won&amp;rsquo;t affect the host machine. First, to run the media server, I need to mount a new drive to store all the movies and TV shows, I chose a 150 GB drive, cuz I don&amp;rsquo;t need more than it and I can remove any torrents and add another one whenever needed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;show disk mount volumes&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;df -h
Filesystem Size Used Avail Use% Mounted on
...
/dev/sdb 150G 134G 16G 90% /mnt/external-disk
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- - Jellyfin UI
- hosting commands with Podman, mounting volumes --&gt;
&lt;p&gt;I use Podman, this is the command I use to install Jellyfin. If you notice, I mount all the configs, cache, and media to the host.&lt;/p&gt;
&lt;!-- uid=1000, gid=1000 --&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;podman run -d \
--name=jellyfin \
-e TZ=IN \
-e PUID=&amp;lt;UID&amp;gt; \
-e PGID=&amp;lt;GID&amp;gt; \
-p 8096:8096 \
-v /home/opc/jellyfin/cache:/cache \
-v /home/opc/jellyfin/config:/config \
-v /mnt/external-disk/torrents:/media \
--restart unless-stopped \
docker.io/linuxserver/jellyfin:latest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;wait.. is that it? Yea, it is that simple!&lt;/p&gt;
&lt;h2 id=&#34;how-do-i-download-stuff-so-i-can-watch-it-in-jellyfin&#34;&gt;How do I download stuff, so I can watch it in Jellyfin?&lt;/h2&gt;
&lt;p&gt;By running Qbitorrent nox, make sure you set the username and password, when you visit the web-ui, you need to be authenticated to access it.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;yum install qbittorrent-nox
qbittorrent-nox -d --webui-port=8181
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Qbittorrent UI screenshot&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/self-hosted-netflix-replacer/qbittorrentnox.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/self-hosted-netflix-replacer/qbittorrentnox-search-ui.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;access-the-web-ui-and-start-watching&#34;&gt;Access the web-ui and start watching.&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/self-hosted-netflix-replacer/media-server-webclient.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;watch-it-on-mobile-ipad-tv-etc&#34;&gt;Watch it on mobile/ iPad/ TV..etc&lt;/h2&gt;
&lt;p&gt;There is an &lt;a href=&#34;https://jellyfin.org/downloads/clients&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;official client for everything.&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;using web vs native app.. download links..etc, you need to configure the endpoint Url of Jellyfin, (covering that in a different post)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;configuring the mobile app.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/self-hosted-netflix-replacer/jellyfin-mobile-configuration.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/self-hosted-netflix-replacer/mobile-playback-screenshots.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;end&#34;&gt;End&lt;/h2&gt;
&lt;p&gt;You just have to spend a couple of hours every year in total to maintain update &amp;amp; maintain. The server costs you can share it with friends. I think people are spoon-fed nowadays~&lt;/p&gt;
&lt;p&gt;You have to consider the fact that, the streaming wars are real, &lt;a href=&#34;https://www.youtube.com/watch?v=yvhv7bgmz64&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;this video summates my frustration.&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;misc&#34;&gt;Misc&lt;/h2&gt;
&lt;p&gt;To update Jellyfin and get the latest build and not lose data, since we are running it in podman, it&amp;rsquo;s pretty easy. Check the command from top to bottom, it is self-explanatory,&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt; podman pull docker.io/linuxserver/jellyfin:latest
podman image ls -a
podman ps
podman stop jellyfin
podman container ls -a
podman container rename jellyfin jellyfin_bkp_&amp;lt;date&amp;gt;
podman container ls -a
podman run -d \
--name=jellyfin \
-e TZ=IN \
-e PUID=&amp;lt;UID&amp;gt; \
-e PGID=&amp;lt;GID&amp;gt; \
-p 8096:8096 \
-v /home/opc/jellyfin/cache:/cache \
-v /home/opc/jellyfin/config:/config \
-v /mnt/external-disk/torrents:/media \
--restart unless-stopped \
docker.io/linuxserver/jellyfin:latest
podman ps
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;personal-update-rant-about-past-backstory&#34;&gt;Personal update - Rant about past - Backstory&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This is usually at the start of each post, but I thought it would be better suited at the bottom from now on.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Back before I got a job, basically a broke ass student, I/ we/ everyone used to pirate entertainment content all the time, u name it, movies, tv shows, music..etc, those times were before the JIO era, back when 59kbps was the unlimited internet provided by BSNL for everyone, youtube videos where limited to 240/ 360p, Aor downloading a show or game, we would run it for days, I vividly remember my friend downloading a show with 600+ episodes show for multiple days, now we got unlimited 5g, 200 Mbps unlimited broadband.. boy times have changed. I have to note it down somewhere..make sure future me remembers.&lt;/p&gt;
&lt;p&gt;After I got my job and the JIO internet era, buying subscriptions became a common thing&amp;hellip; everyone was on the bandwagon&amp;hellip; I came in late but I did try the subscription things before I went with this approach, I knew there were alternatives and I could still pirate stuff. But if I paid the subscription, it is accessible with a click of a button. While writing this I am reminded of something..that it has made us lazy.&lt;/p&gt;</description></item><item><title>Overcoming a limitation in Electron</title><link>//bluepie.in/2023/09/electron-views/</link><pubDate>Thu, 21 Sep 2023 06:03:26 +0000</pubDate><guid>//bluepie.in/2023/09/electron-views/</guid><description>
&lt;p&gt;Hey, what&amp;rsquo;s going on with you, hopefully good things, a small personal update, I think I lost focus on my goals for almost a 1.6 years, right after I joined vz, maybe its beause this is the first ime I ever switched my official day time job, wtf, time..time..time it moves soo fast, nowadays literally everthing takes soo much time in this attention seeking nightmare.. wtf, you can not even ignore most of the things, otherwise you will be an outcast, Something happened and it gave me a wakeup call on why I wanted my life goals on the first place, then I realized, &amp;ldquo;you are the person shaped by your memories, at least your behaviour should reflect it&amp;rdquo;, because If I still had my old memories and experiences I would have not changed courses? doing all the things that external factors influences me, my future self can agree or disagree on this.&lt;/p&gt;
&lt;h2 id=&#34;electron&#34;&gt;Electron&lt;/h2&gt;
&lt;p&gt;I haven&amp;rsquo;t worked in electron before, embedded view and browser views are three different ways to build the UI for your electron app&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iframe tag&lt;/li&gt;
&lt;li&gt;webview tag&lt;/li&gt;
&lt;li&gt;BrowserView&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Officailly in the docs there is note asking people to not use webiew though, &lt;a href=&#34;https://www.electronjs.org/docs/latest/api/webview-tag#warning&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;&amp;ldquo;Important Note: we do not recommend you to use WebViews&amp;rdquo;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;what-why&#34;&gt;What &amp;amp; why&lt;/h2&gt;
&lt;p&gt;Recently I&amp;rsquo;ve been tasked with creating an electron experience on my office job, sadly I can not talk about it though, but I can share how I solved some of the engineering problems though.&lt;/p&gt;
&lt;h2 id=&#34;this-post-is-gona-be-detailing-about&#34;&gt;This post is gona be detailing about,&lt;/h2&gt;
&lt;p&gt;Problem to solve:
Overcoming the lack of support of z-Index on Electron Views&lt;/p&gt;
&lt;h2 id=&#34;figma-design-views&#34;&gt;Figma design views&lt;/h2&gt;
&lt;p&gt;Maybe this can be solved in a different way, maybe there is even an official solution, but when I searched for zindex for browser views, there was not any solution.&lt;/p&gt;
&lt;p&gt;For the project, I needed to work with showing different views simultaneously at the same time.&lt;/p&gt;
&lt;p&gt;All the views are maintained and accessbile in electron api&amp;rsquo;s, In addition to that, I built a wrapper Class that track all the windows in the app, It also trackts what is the current active view.&lt;/p&gt;
&lt;h3 id=&#34;what-i-mean-by-main-view-current-active-view&#34;&gt;What I mean by main view/ current active view?&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/Solving an electron problem/view-expl-part-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Section labelled as &amp;ldquo;1&amp;rdquo; is like a sidebar to a website, its main purpose of it is to switch between showing content on section labelled as &amp;ldquo;2&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;Both &amp;ldquo;1&amp;rdquo; &amp;amp; &amp;ldquo;2&amp;rdquo; are &lt;a href=&#34;https://www.electronjs.org/docs/latest/api/browser-view&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;BrowserViews&lt;/a&gt; positioned absolutely using &lt;a href=&#34;https://www.electronjs.org/docs/latest/api/browser-view#viewsetboundsbounds-experimental&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;set bounds&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;the-problem&#34;&gt;The problem&lt;/h3&gt;
&lt;p&gt;If the view for the left sidebar (section &amp;ldquo;1&amp;rdquo; from image) has to show a popup, that is beyound the bounds (width and height), the content in the view will be cut-off by the main view (section &amp;ldquo;2&amp;rdquo; of the image). In browser if we were to do this, we can set &lt;code&gt;z-index&lt;/code&gt; to overcome the issue, this is true even for electron, if we have used the &lt;code&gt;iframe&lt;/code&gt; instead of &lt;code&gt;BrowserView&lt;/code&gt;,&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/Solving an electron problem/view expl - part 3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;solution&#34;&gt;Solution&lt;/h3&gt;
&lt;p&gt;Since &lt;code&gt;BrowserViews&lt;/code&gt; does not have &lt;code&gt;z-index&lt;/code&gt;, I have to find a different solution. In &lt;code&gt;BrowserView&lt;/code&gt; the last added window is always placed on top of other windows. So this is the reason, the sidebar view (section 1) has its view (view that is out of bounds) cut-off. But luckly we have this &lt;a href=&#34;https://www.electronjs.org/docs/latest/api/browser-window#winsettopbrowserviewbrowserview-experimental&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;api (setTopBrowserView)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;[API definition] - win.setTopBrowserView(browserView)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Raises browserView above other BrowserViews attached to win. Throws an error if browserView is not attached to win.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;setTopBrowserView&lt;/code&gt; I can make the sidebar view to come front, wheneven I want to show a popup or any view that is out of bounds (width and height exceeds the bounds in the view).&lt;/p&gt;
&lt;h3 id=&#34;how-do-we-do-this&#34;&gt;How do we do this?&lt;/h3&gt;
&lt;p&gt;For my usecase, I wanted to show a popup that will be out of bounds when user interacts with the contents of the sidebar, so I have a trigger which I can use when to show or hide out of bounds contents.&lt;/p&gt;
&lt;p&gt;I can listen for mouse events on the side bar view (section &lt;code&gt;1&lt;/code&gt; from the image), whenever the mouse enters the sidebar view I can use &lt;code&gt;setTopBrowserView&lt;/code&gt; to set sidebarview as the &lt;code&gt;top&lt;/code&gt; view.&lt;/p&gt;
&lt;p&gt;Now all the contents. Normal and out of bounds contents are visible, as it is the top view.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/Solving an electron problem/view expl - part 2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;On mouse leave, I can then set the original view that was top view to reset the behaviour.&lt;/p&gt;
&lt;h3 id=&#34;how-do-we-do-this-in-react&#34;&gt;How do we do this in react?&lt;/h3&gt;
&lt;p&gt;Code is pretty straight forward and will make it easy to understand the logic.&lt;/p&gt;
&lt;p&gt;render part&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-jsx&#34;&gt;&amp;lt;div
...
ref={divListenerRef}
&amp;gt;
...
...
...
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;setting up the mouse enter and mouse leave triggers&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;useEffect(() =&amp;gt; {
if (divListenerRef &amp;amp;&amp;amp; divListenerRef.current) {
console.debug(&#39;[setting bounds triggers]&#39;);
divListenerRef.current.addEventListener(&#39;mouseenter&#39;, callbackToExpand);
divListenerRef.current.addEventListener(&#39;mouseleave&#39;, callbackToRestrict);
}
return () =&amp;gt; {
if (divListenerRef.current) {
console.debug(&#39;[cleaning up triggers]&#39;);
divListenerRef.current.removeEventListener(&#39;mouseenter&#39;, callbackToExpand);
divListenerRef.current.removeEventListener(&#39;mouseleave&#39;, callbackToRestrict);
}
};
}, [popupCoordinates, popupProfile]);
#popupCoordinates, popupProfile are just x,y values &amp;amp; status, whether to show or hide the popup
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;like I said code is self explanatory.
I&amp;rsquo;ve had this in draft for over couple of months now.. I wanted to check office laptop to refer my code to be accurate, finally had the urge to open office laptop..at 408am.
like I said in the begining personal udpate.&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Electron is fun, using exisiting tech that we already know to speed up the dev process to deliver quick.. maybe I will cover bundling/building in a diff post..if I feel that I can contribute something different than what is already present all over the internet.&lt;/p&gt;
&lt;p&gt;I made the bad desicision of looking back into my past.. I shouldn&amp;rsquo;t have.. and tried to make contact.. why did I do that? (not influenced by core belief&amp;hellip;suggestions?) by the time I got a response, I was already regretting and back to my current self of just moving forward. all happended in july (remember future me!)&lt;/p&gt;
&lt;p&gt;The thing about memories,it has proven me once again. Since I started to write..complete and had this post in draft for months, I already forgot a lot.. if I remembered all the things from the begining paragraph while making decisions over the last months, I would have made differnet decisions. Memory is really important to _ your _ &amp;amp; _.. (future me remebers?) maybe I can build something for me that keeps track of all these.. with a search user interface and a keyword.. so I can make an informed decision?? google tasks, keep already do this.. no?..something to think about for me. Hope future me reads this and realises how important some small things can be.&lt;/p&gt;</description></item><item><title>Birthday Month 2023, Reflection &amp; Goals</title><link>//bluepie.in/2023/08/birthday-month-reflection/</link><pubDate>Mon, 21 Aug 2023 02:06:53 +0000</pubDate><guid>//bluepie.in/2023/08/birthday-month-reflection/</guid><description>
&lt;p&gt;This is personal post, not about tech.. if anyone other than me is reading this.. ignore this if you wanted somehting technical.&lt;/p&gt;
&lt;p&gt;I can not belive, its been already 3 years &lt;a href=&#34;https://bluepie.in/2020/08/future/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;since this post&lt;/a&gt;. Covid really took 2 years from my life real quick. I dont know If I&amp;rsquo;d be in a better/ lesser position if it were not for covid though.&lt;/p&gt;
&lt;p&gt;I started this draft on august 21 and as i am inching each day towards my birthday and beyond. okey so lets compare the posts from previous years, my predictions and what not.&lt;/p&gt;
&lt;p&gt;I did a purchase with a huge sum of money, atleast my own money without the help/assistance of my parents, so it felt pretty good. Sometimes I think maybe its a bad idea? cuz some of the suggestions when I told others were invest it somewhere else and buy it through other means. Like I always say only future holds the truth.&lt;/p&gt;
&lt;h2 id=&#34;reflection&#34;&gt;Reflection&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;For my future self&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Idk I feel like my judgement is clouded and I got distracted from my life/long term goal of comitting to open source.. or wait till you hear this delusionsal reasoning.. of maybe..maybe I might have leveled up and found something else? maybe.. Im doing a lot of travel back and forth.. and now since I&amp;rsquo;be been living with a close friend of mine in the work location, I had to socialize more.. which is not a bad thing.. I can not just sitback.. thinking and typing away on my keyboard.. while they were in the same/next room&amp;hellip;&lt;/p&gt;
&lt;p&gt;Its like a limbo [removed&amp;hellip;]&lt;/p&gt;
&lt;p&gt;Encrypting below and not removing, if future me forgets for some reason.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;U2FsdGVkX1+Z+HeoqIwG5YyizCq6IyINO1be3KxOWWzx6y1rvURg/YAzbhy0SxxQ
HW3q9sdbRWrNTE57PJBcZFwVtT7NuGjLMPjiSxF1KnaTZ3JULiKbO+riM+TkkxfI
Z0Yh2BKpSF/HRgdjI787sWXiShmJksyM+itfyO6PkcuI5Qiglq7on+ZzkOqbGID7
Gj34igwMbpFQOxUzgtC9H6dIeUzTXjxlqPExZXaGtGxVBlQIHtAekFs8igqG3yn3
OWNHmfbtBHcsA57i4CjOLnJ2VabrLkFX/oym0+6E8aQNiYYZtVf0dlRaAhTcE/vm&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;U2FsdGVkX1+fnI5zDIHyEW0/HpvcfBw1dj7tPcFafQv8HXxlxffZgoluZx9tG7jP
DZpgSrGa4Uq9CJbCvlin+yLMt7b7SFKRJt7xNkDXO0efAkZnXy/xPWWWA2ZXeUGq
DN5YzMv6rLtXMISiFzNZHUMiq04mj0qyHAyxZQOLjwA=&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&amp;ldquo;U2FsdGVkX19MbTbNNHu3p/uw0g+n4qUWxUhn9cbTLU75sG5oayaiiEoJ86S5O9NQ
zRlF8ODh/y/Z/V0NF/6CTZyAyZKKw91ZtDt9lnCBaMijPUoCL2ShOmSm/ewRP8Q3
Gjrb5A6Ml8xvhhuomeH37njHWg3112JR+zhJzJ1A+nXB8AJ9uyBhew+F0FYtNDu4
AhPfDk1Kxs18nKkIs5cOZPptQ8p4fM8fOrvlxZOMdVwHOpCi7pnrHxf0aaBTFoy8
1skzdWQ5C7k18lPAZig1cg==&amp;rdquo;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;#OpenSSL 3.1.2 1 Aug 2023 (Library: OpenSSL 3.1.2 1 Aug 2023)
#enc
echo -n &amp;quot;string-to-encrypt&amp;quot; | openssl enc -aes-256-cbc -a -pbkdf2
#dec
echo -n &amp;quot;string-to-decrypt&amp;quot; | base64 -d | openssl enc -d -aes-256-cbc -A -pbkdf2
#incorrect password will print random symbols
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/birthday-month-and-reflection/post-from-august-2019.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;above text from the images is from 4 years ago, like wtf&amp;hellip; I can not grasp time..&lt;/p&gt;
&lt;p&gt;As i am sitting here writng in this void space at 1:42:14 am, I think to myslef&amp;hellip;wait im drifiting away again..nope. There are lot of distractions during the day time. Sometimes I get the best ideas and solve problems only during the night.. but why.. its not like I can note mute the nose during daytime, I have anc headphones, piano/guitar music, osts, game ost, and etc.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/birthday-month-and-reflection/post-from-august-2020.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;And the above text is from 2020, oh how naive I can be at times? Though I made some progress to contribute to opensource and also progressed in excelling in a new domain. but professionally, I moved to a new company and there I started working in java. Which is not the new domain I told I would pursue. Though for open source I am maintaining some apps for android.&lt;/p&gt;
&lt;h2 id=&#34;what-am-i-gona-do-this-year&#34;&gt;What am I gona do this year?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;In terms of Health&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;During the covid period and after, I became unfit, this i realized after during the tavesl between chennain and hometown, I would feel uneasy flexing hy body and I had no stamina, and when I compared photos, it became obvious.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/birthday-month-and-reflection/august-post-2023-taken-2020.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;pic from 2021, during my old office&amp;rsquo;s tour - (though I look skinny (lost muscle mass after going to Chennai), I am perfectly healthy) after this I gained weight, developed love-handles which is hardest to lose, as I an writing, drafting this.. I&amp;rsquo;ve already started to workout more, the goal here is to build my old stamina and going back to gym.. yea..back. I used to go to gym on college, at that time I gained weight then when i moved to chennai, lost weight, then when I got back to home during covid, gained a lot of weight..&lt;/p&gt;
&lt;p&gt;below is the pic of me from 2023 thought I kinda don&amp;rsquo;t look unhealthy, I am unhealthy here, the shirt is covering my belly and love-handles.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/birthday-month-and-reflection/august-post-2023-taken-2023.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;For this year, my goal is to become fit, already on a xx+ day streak at the time of writing this.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In terms of Job&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;So here is my goal, I wana move to an even better comapany and expand my knowledge or work here at current compay (vz at the time of writing this) but go to higher designation (SDE II to higher) or even better like my friend who is working remote, find a job that has full time remote. ~review it next year..okey?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In terms of Open Source&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;With an office job, social life,..nd all the other distractions.. living at the work location.. its difficult for me to maintain a steady contribution to opensource.. I always think about it, but have somthing that has more priority than this. I guess for the coming year too, it will be the same? idk..lets hope for the best!&lt;/p&gt;
&lt;h2 id=&#34;additionaly-notes&#34;&gt;Additionaly notes&lt;/h2&gt;
&lt;p&gt;Removed a lot of stuff after reviewing it a couple of times..but some are encrypted, this was in a draft for a long time now.&lt;/p&gt;</description></item><item><title>Android CI on Github</title><link>//bluepie.in/2023/03/android-ci/</link><pubDate>Sun, 12 Mar 2023 00:08:06 +0000</pubDate><guid>//bluepie.in/2023/03/android-ci/</guid><description>
&lt;p&gt;Been busy, its not like I lost interest in posting here, I just didn&amp;rsquo;t allocate time for writing here, which is the opposite of what I set out to do.. which in turn does not track my progress at all, I should be held accountable for my progress. ~pff I hate it.&lt;/p&gt;
&lt;p&gt;A friend told me in the time that I did not post, not necessarily everything should be a progress, maybe this is right or maybe wrong..only time will tell. (Meaning sometimes you can just relax, but to be honest.. I was not releaxing aswell)&lt;/p&gt;
&lt;h2 id=&#34;why-about&#34;&gt;Why &amp;amp; About&lt;/h2&gt;
&lt;p&gt;This is going to short, Recently I created a CI for development android builds, this is to reduce &amp;amp; eliminate the manuall build process to every pr, this reduces a lot of time for me.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;so what does this do?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When a Pull Request is made to &lt;code&gt;development&lt;/code&gt; or &lt;code&gt;master&lt;/code&gt; branch, a CI will trigger that will pull all the latest code from that branch and try to build the code in &lt;code&gt;dev&lt;/code&gt; mode, it will report whether tests and build is success and export the final apk. This will be helpful for testers and even me to take the build right away and check whether the code breaks the build or not. Additionally I dont have to manually make a comment everytime for testers to take the build.&lt;/p&gt;
&lt;h2 id=&#34;android-ci-with-github-actions&#34;&gt;Android CI with github actions&lt;/h2&gt;
&lt;p&gt;GitHub Actions is a continuous integration and continuous delivery (CI/CD) platform that allows to automate builds, test, and deployment pipeline. We can create workflows that build and test every pull request to our repositories.&lt;/p&gt;
&lt;h3 id=&#34;github-actions-free-tier&#34;&gt;Github actions free tier&lt;/h3&gt;
&lt;p&gt;GitHub Actions are unlimited for public repositories and the Free plan also provides 2,000 minutes of Actions each month for use with out private projects.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/android-ci/github-free-account.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/android-ci/actions-for-private-reporsitories.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;gradle-build&#34;&gt;Gradle build&lt;/h3&gt;
&lt;p&gt;There are different variants of your application (release &amp;amp; debug, each variant has its own set of porperties). But what do we need here? debug variant, because that is what we share with the users and get feedback from. I mainly wanted this because everytime I make a pull request, I have to check if it builds, take builds.. I then have to link the builds to that pull request, so others/ even I can use it and test that pull request.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Commands&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;debug: This is the specific variant of the application that is being built. In Android projects, you can define different build variants, such as debug and release, to configure different settings and behavior. The debug variant is typically used during development and testing, while the release variant is used for production-ready builds. (note that: for the debug build the sizes will be significantly big than release builds)&lt;/p&gt;
&lt;p&gt;For example: &lt;a href=&#34;https://github.com/aghontpi/ad-silence/blob/51fb5782f711388c6632fa2d762b4beded3c9320/app/build.gradle#L19-L33&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;In my case I have these two builds&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-gradle&#34;&gt;buildTypes {
release {
minifyEnabled true
shrinkResources true
proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;
}
debug {
minifyEnabled true
shrinkResources true
proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I just specifically need the debug build alone.&lt;/p&gt;
&lt;h2 id=&#34;what-is-a-keystore-why-do-we-need-it&#34;&gt;What is a Keystore &amp;amp; Why do we need it?&lt;/h2&gt;
&lt;p&gt;A keystore plays a pivotal role in ensuring the security and integrity of our application. Essentially, a keystore is a secure store that holds cryptographic keys, certificates, and sensitive data used to digitally sign our App. These keys are used to digitally sign our App&amp;rsquo;s APK file. This digital signature serves as a means to verify the authenticity and origin of your application. When a user installs an app, the Android system uses the keystore&amp;rsquo;s digital signature to confirm that the App has not been tampered with and that it indeed originates from the expected source. This prevents malicious actors from altering the app&amp;rsquo;s code and introducing potential security vulnerabilities.&lt;/p&gt;
&lt;p&gt;To simply put, we need this to distribute our app builds, users can trust this build since it is from us.&lt;/p&gt;
&lt;p&gt;This keystore file should be kept private, should not be shared with others and can not be comitted along with other files in the repository.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;If we keep this file private, how do we take builds then?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is where &lt;a href=&#34;https://docs.github.com/en/actions/security-guides/encrypted-secrets&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;configuring secret in github actions&lt;/a&gt; comes into play.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/android-ci/configuring-secret-github-actions.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Once the secrets are configured, it can be used like below&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Decode keystore
env:
DEBUG_KEYSTORE: ${{ secrets.DEBUG_KEYSTORE }}
run: |
echo &amp;quot;$DEBUG_KEYSTORE&amp;quot; | base64 --decode &amp;gt; debug.keystore
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;configuring-the-workflow&#34;&gt;Configuring the workflow&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;We set a name &amp;amp; when should the builds be triggered, it can be of several things Cron, Issue Comment, Pull Request, Fork, Deployment Status..etc. See the &lt;a href=&#34;https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows.&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;full list here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For my usecase, what I specifically need here is &lt;a href=&#34;https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#push&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;push&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;name: Android CI
on:
push:
branches: [ &amp;quot;master&amp;quot;, &amp;quot;development&amp;quot; ]
pull_request:
branches: [ &amp;quot;master&amp;quot;, &amp;quot;development&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we need to &lt;a href=&#34;https://docs.github.com/en/actions/using-jobs/using-jobs-in-a-workflow&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;specify the jobs&lt;/a&gt;, there can be multiple job, but in our case, we just need a build job, give it a name.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;jobs:
build:
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Choosing &lt;a href=&#34;https://docs.github.com/en/actions/using-jobs/choosing-the-runner-for-a-job&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;which type of machine&lt;/a&gt; this should be run on.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;runs-on: ubuntu-latest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A job contians sequence of tasks called &lt;a href=&#34;https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idsteps&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;steps&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Checking out&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: checkout &amp;amp; set up JDK 11
- uses: actions/checkout@v3
uses: actions/setup-java@v3
with:
java-version: &#39;11&#39;
distribution: &#39;temurin&#39;
cache: gradle
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Decode keystore from repository secrets&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Decode keystore
env:
DEBUG_KEYSTORE: ${{ secrets.DEBUG_KEYSTORE }}
run: |
echo &amp;quot;$DEBUG_KEYSTORE&amp;quot; | base64 --decode &amp;gt; debug.keystore
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Make gradle executable &amp;amp; run gradle build&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Grant execute permission for gradlew
run: chmod +x gradlew
- name: Build with Gradle
env:
KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
KEY_ALIAS: ${{ secrets.KEYSTORE_ALIAS }}
KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
run: ./gradlew assembleDebug -Pandroid.injected.signing.store.file=$(pwd)/debug.keystore -Pandroid.injected.signing.store.password=$KEYSTORE_PASSWORD -Pandroid.injected.signing.key.alias=$KEY_ALIAS -Pandroid.injected.signing.key.password=$KEY_PASSWORD
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We inject the &lt;code&gt;debug.keystore&lt;/code&gt; &amp;amp; other environment variables into the build using params like &lt;code&gt;-Pandroid.injected.signing.store.file=$(pwd)/debug.keystore&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Upload the artifacts&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Upload debug build
uses: actions/upload-artifact@v3
with:
name: &amp;lt;upload-name&amp;gt;.apk (build artifact)
path: app/build/outputs/apk/debug/app-debug.apk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/aghontpi/ad-silence/blob/master/.github/workflows/android.yml&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Full workflow file.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Build in action&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/android-ci/build-in-action.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This enabled me to not care about dev-debug builds entirely and focus just on development, which is a great time save.&lt;/p&gt;
&lt;p&gt;In future, I would create a separate releases named &lt;code&gt;nightly&lt;/code&gt;, where the dev branch is built daily and these builds will be updated there.&lt;/p&gt;</description></item><item><title>Updating Dns Servers for Ads and Tracking Protection in 2023</title><link>//bluepie.in/2023/01/updating-dns-servers-for-ads-and-tracking-protection-in-2023/</link><pubDate>Sat, 28 Jan 2023 06:02:22 +0000</pubDate><guid>//bluepie.in/2023/01/updating-dns-servers-for-ads-and-tracking-protection-in-2023/</guid><description>
&lt;h2 id=&#34;upgrading-pi-hole&#34;&gt;Upgrading PI hole&lt;/h2&gt;
&lt;p&gt;Once every year, I do server maintainence (during Dec-Jan), this year I updated the our dns server from &lt;a href=&#34;https://github.com/pi-hole/pi-hole&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;pi-hole&lt;/a&gt; to &lt;a href=&#34;https://github.com/AdguardTeam/AdGuardHome&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;AGH&lt;/a&gt; (both are open source projects..) Just wanted to try an alternative, after using it for a while, the UI &amp;amp; Features on AGH is much better than pi-hole.&lt;/p&gt;
&lt;h2 id=&#34;why-a-custom-dns-server&#34;&gt;Why a custom dns server?&lt;/h2&gt;
&lt;p&gt;All websites/apis are just ip addresses (just numbers). Nameservers maintains a mapping of the domain names to the ip addresses, so when we make a request, we get the appropriate ip address.&lt;/p&gt;
&lt;p&gt;The idea is simple, by running our own dns server, we can prevent our network providers spying on us, on top of that we can intercept &amp;amp; block all ads &amp;amp; trackers.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I get ads, but what are Trackers?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Similar to ads, ever been in a situation where you searched for something in flipkart/amazon.. then later you find the ad to buy the product elsewhere, this is because of trackers.. trackers are worse because they collect your data, the same way we block ads, trackers should be blocked.&lt;/p&gt;
&lt;h2 id=&#34;how-this-can-help-us-with-ad-trackers-blocking&#34;&gt;How this can help us with ad &amp;amp; trackers blocking?&lt;/h2&gt;
&lt;p&gt;Can you make a guess how serving ads in app/websites work? they are from a server too, that server has a domain linked to it.. can you see where I am are going with this?&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;good content -&amp;gt; respond with ip address
ad/tracker -&amp;gt; respond with 0.0.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Not just blocking ads &amp;amp; tracking, you can do much more.. there are other things that you can do in dns level.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;block windows tracking or updates in windows machines&lt;/li&gt;
&lt;li&gt;blocking spyware&lt;/li&gt;
&lt;li&gt;disabling websites for a particular client (ex: blocking instagram on a your phone alone)&lt;/li&gt;
&lt;li&gt;if you don&amp;rsquo;t want to keep tracking of your watch history in youtube
and many more.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;aren-t-there-other-solutions-to-blocking-trackers-and-ads&#34;&gt;Aren&amp;rsquo;t there other solutions to blocking trackers and ads?&lt;/h3&gt;
&lt;p&gt;yes but those come with a disadvantage,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Browser extensions.. only applies to browsers (system wide, everywhere and all applications)&lt;/li&gt;
&lt;li&gt;Android, Iphone (separate apps that use vpn locally to achieve this) - Drains battery alot&lt;/li&gt;
&lt;li&gt;Rooting android, Jailbreaking ios.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;so this does not require any of that.. no addons, no extra apps, no root, no jailbreak.&lt;/p&gt;
&lt;h2 id=&#34;dns-over-tls&#34;&gt;DNS Over TLS&lt;/h2&gt;
&lt;p&gt;Introduced in 2016, main idea is wrapping DNS requests and responses via TLS (Transport Layer Security), ensures observer will not be able to track or tamper the contents of the DNS requests.&lt;/p&gt;
&lt;!-- ssl - secure socket layer --&gt;
&lt;!-- tls - tranport layer security, offers end to end security. --&gt;
&lt;p&gt;Shortly after, android introduced DOT as &amp;ldquo;Private DNS&amp;rdquo; on Android 9 &amp;amp; up, we will be using this feature in our devices to block all ADS &amp;amp; Trackers.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/DOT-noMITM.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;client -&amp;gt; dot server, dot server -&amp;gt; queries the dns.. (we forward our request to serveral dns servers, load-balancers)&lt;/p&gt;
&lt;p&gt;Traditional DNS vs DOT&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/traditional-vs-dot.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;how-do-we-do-it&#34;&gt;How do we do it?&lt;/h2&gt;
&lt;p&gt;We use an existing open source dns resolver.&lt;/p&gt;
&lt;p&gt;One options is to go with &lt;a href=&#34;https://github.com/pi-hole/pi-hole&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;PI Hole&lt;/a&gt;, it is a community favourite open source project that has all the bells and whistles for blocking ads and trackers integrated inside it.&lt;/p&gt;
&lt;p&gt;We will be using &lt;a href=&#34;https://github.com/AdguardTeam/AdGuardHome&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;AG Home&lt;/a&gt;, it is also a popular open source project, which is community maintained. up until lastmonth (dec 2022) I was using PI-hole, switched to AG-Home, just to try something new.&lt;/p&gt;
&lt;h3 id=&#34;installing&#34;&gt;Installing&lt;/h3&gt;
&lt;p&gt;I am assuming that you already have a linux box hosted in aws/google/..etc. DOT works on port 853, so you have to allow incoming and outgoing traffic in port 853.&lt;/p&gt;
&lt;h4 id=&#34;docker&#34;&gt;Docker&lt;/h4&gt;
&lt;p&gt;To make things easier, I will be using docker images to run the software.&lt;/p&gt;
&lt;p&gt;running a docker container.. command&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;
podman run --name dnsServer\
--restart unless-stopped\
-p 2346:3000/tcp\
-p 1853:853/tcp\
-d adguard/adguardhome
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Things to note are, exposed port 3000 is the webport for admin page &amp;amp; 853 is for DOT.&lt;/p&gt;
&lt;p&gt;We maintain the configs in a yaml file which will be mounted to the container.. here is an example version.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;bind_host: 0.0.0.0
bind_port: 3000
beta_bind_port: 0
users:
# - name: &amp;lt;your-username&amp;gt;
# password: &amp;lt;your-passowrd&amp;gt;
auth_attempts: 5
block_auth_min: 15
http_proxy: &amp;quot;&amp;quot;
language: &amp;quot;&amp;quot;
theme: auto
debug_pprof: false
web_session_ttl: 720
dns:
bind_hosts:
- 0.0.0.0
blocked_response_ttl: 10
ratelimit: 20
refuse_any: true
fastest_timeout: 1s
tls:
enabled: true
server_name: dns.bluepie.in
port_https: 443
port_dns_over_tls: 853
certificate_path: /opt/dnsServer/conf/fullchain.pem
private_key_path: /opt/dnsServer/conf/privkey.pem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once everything is configured correctly, the service will be up and running.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;podman ps
b831cf04743d docker.io/adguard/adguardhome:latest --no-check-update... 1 days ago Up 3 weeks ago 0.0.0.0:1853-&amp;gt;853/tcp, 0.0.0.0:2346-&amp;gt;3000/tcp dnsServer
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;configuring-domain&#34;&gt;Configuring Domain&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;First we need a domain name, a paid one if you have it or a free one would be good, I&amp;rsquo;ll be creating a sub-domain from my domain, (i.e) &amp;lsquo;dns.bluepie.in&amp;rsquo; and get SSL certificates chain for the same.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Inorder to uniquely identify clients, we need to create a wildcard sud-domain in our DNS provider, in my case godaddy.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/creating-wild-card-dns.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;nginx&#34;&gt;Nginx&lt;/h4&gt;
&lt;p&gt;We will be using nginx as a reverse proxy for exposing our services to the internet.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Admin Config:&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt; server_name dns.bluepie.in;
location / {
proxy_pass http://localhost:2346/;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Forwarded-Host $host;
proxy_redirect / / ;
proxy_cookie_path / /;
proxy_connect_timeout 15s;
proxy_send_timeout 15s;
proxy_read_timeout 15s;
}
listen 443 ssl;
ssl_certificate /path/to/fullchain.pem;
ssl_certificate_key /path/to/privkey.pem;
include /etc/ssl/options-ssl-nginx.conf;
ssl_dhparam /etc/ssl/ssl-dhparams.pem;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;DNS Config:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;nginx has a load balancing feature, stream directive to manage tcp and udp. we can use this to forward our requests to dns servers.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;stream {
log_format basic &#39;$time_iso8601 $remote_addr &#39;
&#39;$protocol $status $bytes_sent $bytes_received &#39;
&#39;$session_time $upstream_addr &#39;
&#39;&amp;quot;$upstream_bytes_sent&amp;quot; &amp;quot;$upstream_bytes_received&amp;quot; &amp;quot;$upstream_connect_time&amp;quot;&#39;;
access_log /var/log/nginx/dns-access.log basic buffer=1k flush=5s;
upstream dot {
zone dot 512k;
server 127.0.0.1:1853;
}
server {
listen 853;
proxy_pass dot;
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;admin-portal&#34;&gt;Admin portal&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Stats page (configured to refresh every 24 hours)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/dns-statistics.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Configuring blocklists&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Over the years, I have accustomed to the following blocklists and it works best for me.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/dns-blocklists.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Blocklists (entires count taken at the time of writing this post&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;# Blocks Ads, Mobile Ads, Phishing, Malvertising, Malware, Tracking, Telemetry, CryptoJacking, Analytics, Spyware, Ransomware, Exploit, Fraud, Abuse, Scam, Spam, Hijack, Misleading Marketing.
# ~300,000 entries
https://oisd.nl
# ~180,000 entries
# Extending and consolidating hosts files from several well-curated sources like adaway.org, mvps.org, malwaredomainlist.com, someonewhocares.org, and potentially others.
github.com/StevenBlack/hosts
# ~480,000 entries
# Automatically updated, moderated and optimized list for blocking ads, trackers and other online garbage.
github.com/notracking/hosts-blocklists
# Specially Designed for Mobile Ad Protection.
# ~200,000 entries
github.com/jerryn70/GoodbyeAds
# Blocking mobile ad providers and some analytics providers.
# ~7,000 entries
github.com/AdAway/adaway.github.io
# A filter composed of several other filters (AdGuard Base filter, Social media filter, Tracking Protection filter, Mobile Ads filter, EasyList and EasyPrivacy) and simplified specifically to be better compatible with DNS-level ad blocking.
# ~50,000 entries
github.com/AdguardTeam/AdguardSDNSFilter
# Protects you from many types of spyware, reduces bandwidth use, blocks certain pop-up traps, prevents user tracking by way of &amp;quot;web bugs&amp;quot; embedded in spam, provides partial protection to IE from certain web-based exploits and blocks most advertising you would otherwise be subjected to on the internet.
# ~11,000 entries
someonewhocares.org/hosts
# Filter that blocks ads on mobile devices. Contains all known mobile ad networks.
# ~1,000 entries
kb.adguard.com/general/adguard-ad-filters#mobile-ads-filter
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;how-do-we-use-it&#34;&gt;How do we use it?&lt;/h2&gt;
&lt;p&gt;Pick a unique word, ex: gopidevice1, then use this word as prefix for &amp;lsquo;dns.bluepie.in&amp;rsquo;. (i.e) &amp;lsquo;gopidevice1.dns.bluepie.in&amp;rsquo;, this is the url that you should use in your devices.&lt;/p&gt;
&lt;h3 id=&#34;android&#34;&gt;Android&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/android-config.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;ios-iphone-ipad&#34;&gt;IOS - iphone, ipad&lt;/h3&gt;
&lt;p&gt;Go to &lt;a href=&#34;https://dns.bluepie.in/ios/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;dns.bluepie.in/ios/&lt;/a&gt;, navigate to &amp;lsquo;tool&amp;rsquo;, give a name and use your unique url to create a profile.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/ios-config-1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/ios-config-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;mac-windows&#34;&gt;Mac/Windows&lt;/h3&gt;
&lt;p&gt;Same as iphone, go to &lt;a href=&#34;https://dns.bluepie.in/ios/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;dns.bluepie.in/ios/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;//bluepie.in/images/posts/block-ads-and-tracking-upgradging-dns-server/dot-install-macos-3.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Migrating from PI-Hole to AGH was a good move, once you have used this and experienced &amp;ldquo;no ads&amp;rdquo;, you can not go back~&lt;/p&gt;</description></item></channel></rss>