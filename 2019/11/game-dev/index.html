<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content=noodp><meta name=author content=Bluepie><meta name=description content="Public Journal of aghontpi"><meta name=keywords content="aghontpi bluepie Journal"><link rel=prev href=//bluepie.in/2019/10/android-reversing-part-2/><link rel=next href=//bluepie.in/2019/12/linux-ld_preload/><link rel=canonical href=//bluepie.in/2019/11/game-dev/><link rel=apple-touch-icon sizes=180x180 href=//bluepie.in/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=//bluepie.in/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=//bluepie.in/favicon-16x16.png><link rel=manifest href=//bluepie.in/site.webmanifest><link rel=mask-icon href=//bluepie.in/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>Game Dev | Bluepie&#39;s Journal</title><meta name=title content="Game Dev | Bluepie's Journal"><link rel=stylesheet href=//bluepie.in/font/iconfont.css><link rel=stylesheet href=//bluepie.in/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"\/\/bluepie.in\/"},"articleSection":"posts","name":"Game Dev","headline":"Game Dev","description":"Hey!, hope you are doing well!, im good, This post should have gone up in the month of august and this post should have been a follow-up, anyway never too late. Update: Im following a tight schedule for the past few weeks, tight-schedule in the sense \x26ldquo;wake-up -\x26gt; commute-to-office -\x26gt; professional code-\x26gt; aftier-office -\x26gt; passion code -\x26gt; sleep\x26rdquo; throw in breaks, travel, and Personal hygene time in there, at-first it was awful, but after some while got the hang of it,Infact it became like addiction to me at this point \x26amp; im craving for more.","inLanguage":"en-us","author":"Bluepie","creator":"Bluepie","publisher":"Bluepie","accountablePerson":"Bluepie","copyrightHolder":"Bluepie","copyrightYear":"2019","datePublished":"2019-11-15 11:46:05 \x2b0530 IST","dateModified":"2019-11-15 11:46:05 \x2b0530 IST","url":"\/\/bluepie.in\/2019\/11\/game-dev\/","wordCount":"1235","keywords":["Bluepie\x27s Journal"]}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="extra extra-moon"></i></a>&nbsp;<a href=//bluepie.in/>Bluepie&#39;s Journal</a></div><div class="menu navbar-right"><a class=menu-item href=//bluepie.in/posts/>My Journal</a>
<a class=menu-item href=//bluepie.in/categories/>Categories</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="extra extra-moon"></i></a>&nbsp;<a href=//bluepie.in/>Bluepie&#39;s Journal</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=//bluepie.in/posts/>My Journal</a>
<a class=menu-item href=//bluepie.in/categories/>Categories</a></div></div></nav><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-135013873-2','auto');ga('send','pageview');}</script><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Game Dev</h1><div class=post-meta>Written by <a itemprop=name href=//bluepie.in/ rel=author>Bluepie</a> with ♥
<span class=post-time>on <time datetime=2019-11-15 itemprop=datePublished>November 15, 2019</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=//bluepie.in/categories/tech/>Tech</a>
<a href=//bluepie.in/categories/development/>development</a>
<a href=//bluepie.in/categories/game-dev/>game-dev</a></span></div></header><div class=post-content><img src=//bluepie.in/images/posts/game-dev.png class=featured_image><p><em>Hey!, hope you are doing well!, im good, This post should have gone up in the month of august and this post should
have been a follow-up, anyway never too late. Update: Im following a tight schedule for the past few weeks, tight-schedule
in the sense &ldquo;wake-up -&gt; commute-to-office -&gt; professional code-&gt; aftier-office -&gt; passion code -&gt; sleep&rdquo; throw in breaks, travel,
and Personal hygene time in there, at-first it was awful, but after some while got the hang of it,Infact it became like addiction
to me at this point &amp; im craving for more.</em></p><hr><h1 id=why-what>why &amp; what</h1><p>So in the month of september a friend of mine asked me whether I can Join him in making game, till that point in time,
I haven&rsquo;t done game development. So the gamejam was js13kgames, though it ran for a month we went into working only in the
last seven days.</p><h3 id=development-stack>development stack</h3><p>javascript,
gulp for automated tasks,</p><p>apart from the time constraint of a month to finish, this also included a constraint which is, the total size of the
game must be less than 13 kilobytes and a topic to develop unde, which is not quite a lot. Everything developed for the competition was from scratch except the sound library.</p><h3 id=challenges>challenges</h3><p>Though the gamejam was for a month, the actual dev period was for 7 days, to be honest it was more like 2-3 days of dev.
(Project mate) <a href=https://github.com/FR0ST1N/Pew-Pew/ rel="nofollow noreferrer" target=_blank>FR0ST1N</a> was sick during the last few days so the game was not complete, I made the decision to submit
it anyway.</p><p>This post is gona be the disection of different parts of the game.</p><h4 id=ui>UI</h4><p>Pixel art for game images, since we were limited on the size aspect of the game, we could not have high res image assets.Spritesheets were used for the development.</p><p>There is a seperate class for parsing the spriteSheet &amp; maintining it states based on the sprite attributes.</p><pre><code class=language-js>
    /*
     * Porperties the sprite has to manipulate it
     */

    const image = new Image();
    image.src = 'images/' + imagename;
    this.image = image;
    this.rows = rows;
    this.columns = columns;
    this.individualSpriteSize = individualSpriteSize;
    this.totalSpriteSize = totalSpriteSize;
    this.position = position;
    this.scaleFactorX = scaleFactorX;
    this.scaleFactorY = scaleFactorY;

</code></pre><h4 id=animation>animation</h4><p>Bare api calls, small framework that can be used in future projects.</p><p>Explanation on how that works.</p><p>Core is based on values defined by you, fps is set accordingly &amp; callbacks are called,
these callbacks are responsilbe for object-animation &amp; object movement, all logic should be done with those callbacks.</p><p><strong><em>following this principle, animation was done to the most part, code for the same is below</em></strong></p><p>Main callbacks from the animation class</p><pre><code class=language-js>
/*
 * Animation properties that all object in canvas should have,
 * ex |------------------------| represent total time
 *    |-----x------x------x-----| represent time to next frame.
 */

  /**
   * reset the animation timer,
   * @return {void}
   */
  _resetAnimationTimer() {
    this.animationTimer = 0;
  }


  /**
   * reset the animation timer,
   * @return {void}
   */
  _resetMotionTimer() {
    this.motionTimer = 0;
  }

  /**
   * @return {void}
   */
  stepTimer() {
    if (this.timeToChangeAnimation != 0) {
      this.animationTimer += 1;
    } if (this.timeToChangeMotion != 0) {
      this.motionTimer += 1;
    }
  }

  /**
   * @return {boolean}
   */
  isTimeToAnimate() {
    if (this.timeToChangeAnimation == 0) {
      return true;
    } if (this.animationTimer == this.timeToChangeAnimation) {
      this._resetAnimationTimer();
      return true;
    }
    return false;
  }

  /**
   * @return {boolean}
   */
  isTimeToMove() {
    if (this.timeToChangeMotion == 0) {
      return true;
    } if (this.motionTimer == this.timeToChangeMotion) {
      this._resetMotionTimer();
      return true;
    } else {
      return false;
    }
  }

</code></pre><p>Main callbacks from timer<low-level></p><pre><code class=language-js>
  /**
   * wrapper Draw.
   */
  wDraw() {
    this.context.drawImage(
        this.sprite.image,
        this.sprite.position.x,
        this.sprite.position.y,
        this.sprite.individualSpriteSize,
        this.sprite.individualSpriteSize,
        this.position.x, this.position.y,
        this.sprite.individualSpriteSize * this.sprite.scaleFactorX,
        this.sprite.individualSpriteSize * this.sprite.scaleFactorY
    );
  }

  /**
   * override this method in child classe, for animation logic.
   * when it is time for next frame, this method will be called.
   */
  objectUpdate() {
  }

   /**
   * makes decisions whether to redraw,
   * based on the fps defined.
   */
  postObjectUpdate() {
    this.stepTimer();
    if (this.isTimeToMove()) {
      this._Movement();
    } if (this.isTimeToAnimate()) {
      this.objectUpdate();
    } this.objectAnimation();
  }

  /**
   * object movement loop
   */
  objectAnimation() {
    this.animationTimerId = setTimeout(() =&gt; {
      this.postObjectUpdate();
    }, 1);
  }


</code></pre><h5 id=where-i-struggled>Where I struggled</h5><p>The level designing was the part that i struggled the most, since from what we had to work with, I was finding it hard to come up with a good gameplay anyhow based on the time constraint (two hours before deadline for the game), I came up with a level design involving two fire-animations (straight pattern &amp; follow pattern)</p><p>following is the level logic that I cameup &amp; implemented in 15min.</p><pre><code class=language-js>
  //@level logic from class level

  /**
   * design
   * level one:
   *  one enemy, straight bullet, health = 1, rateOfFire = (1000-100/level=1)
   * level two:
   *  two enemy:
   *    1st enemy: straight bullet, health = 2, rateOfFire = (1000-100/level=2)
   *    last enemy: follow bullet, health,rateOfFire=same as 1st enemy
   * ... progressive, all the last enemy has the follow bullet
   */
  levelTrigger() {
    for (let enemyCounter = 1; enemyCounter &lt;= this.level;
      enemyCounter++ ) {
      const enemy = this.enenmyOneFactory(
          new Position(800, enemyCounter * 50 + 100),
          this.level,
          (1000 - 100) / this.level);
      enemy.startAnimation(this.context);
      enemy.autoshoot = true;
      if (this.level != 1 &amp;&amp; enemyCounter == this.level) {
        enemy.setBulletPattern(BulletPattern.FOLLOW);
      }
      enemy.shoot();
      this.currentLevelEnemies.push(enemy);
      this.drawableObjects.push(enemy);
    }
  }

</code></pre><h3 id=collision-detection>collision Detection</h3><p>Collision detection was straight forward too, you just compare the two rectangles.</p><pre><code class=language-js>
  /**
   * collideDetect of enemyObject with given bullet
   * @param {Bullet} bullet
   * @return {boolean}
   */
  collideDetect(bullet) {
    if (this.position == null || bullet.position == null ) {
      return false;
    }
    const bulletObject = {'x': bullet.position.x,
      'y': bullet.position.y,
      'width': bullet.sprite.individualSpriteSize * bullet.sprite.scaleFactorX,
      'height': bullet.sprite.individualSpriteSize * bullet.sprite.scaleFactorY,
    };
    const EnemyObject = {
      'x': this.position.x,
      'y': this.position.y,
      'width': this.sprite.individualSpriteSize * this.sprite.scaleFactorX,
      'height': this.sprite.individualSpriteSize * this.sprite.scaleFactorY,
    };
    return CollisionDetection.detect(bulletObject, EnemyObject);
  }

</code></pre><h3 id=sound>Sound</h3><p>Small library extending from previous year&rsquo;s.</p><p><a href=https://github.com/FR0ST1N/Pew-Pew/blob/develop/src/js/audio/audioEffects.js rel="nofollow noreferrer" target=_blank>AudioEffects.js</a></p><h4 id=fonts>Fonts</h4><pre><code>Even using texts take a huge hit on the size of the game, we found a custom font implementation &amp; modified it to fit our usecase, since the font class mainly contains hardcoded values for drawing fonts to the canvas, I have linked just the source below.

[font.js](https://github.com/FR0ST1N/Pew-Pew/blob/develop/src/js/font/font.js)
</code></pre><p>the fonts can be used by the following way</p><pre><code class=language-js>
this.ctx.fillStyle = '#00bff3';
const CORRECTION = (value.length - 1) * 20;
Font.draw(value, size, this.ctx, 775 - CORRECTION, 10);

</code></pre><h4 id=build>Build</h4><p>For automating the build process gulp was used, the commands from gulp are pretty straight forward, can be understood just from telling the commands.</p><pre><code class=language-js>
gulp.task('cssLint', function() {
  return gulp.src('src/css/*.css')
      .pipe(cssLint({
        reporters: [{formatter: 'string', console: true}],
      }));
});

gulp.task('jsLint', function() {
  return gulp.src('src/js/**/*.js')
      .pipe(concat('main.js'))
      .pipe(jsLint())
      .pipe(jsLint.format())
      .pipe(jsLint.failAfterError());
});

gulp.task('htmlBuild', function() {
  return gulp.src('src/index.html')
      .pipe(htmlMin({
        collapseWhitespace: true,
        removeComments: true,
        html5: true,
      }))
      .pipe(gulp.dest('build'));
});

gulp.task('cssBuild', function() {
  return gulp.src('src/css/*.css')
      .pipe(concat('style.min.css'))
      .pipe(cssMin())
      .pipe(gulp.dest('build/css'));
});

gulp.task('jsBuild', function() {
  return gulp.src(jsConcat, {allowEmpty: true})
      .pipe(concat('main.js'))
      .pipe(jsMin({
        noSource: true,
        ext: {
          min: '.min.js',
        },
      }))
      .pipe(gulp.dest('build/js'));
});

gulp.task('imageMin', function() {
  return gulp.src('src/images/*')
      .pipe(imageMin({optimizationLevel: 5}))
      .pipe(gulp.dest('build/images'));
});

gulp.task('zip', function() {
  const maxSize = 1024 * 13;

  return gulp.src('build/**')
      .pipe(zip('Pew-Pew.zip'))
      .pipe(gulp.dest('zip'))
      .pipe(checkSize({fileSizeLimit: maxSize}));
});

gulp.task('lint', gulp.parallel(
    'htmlLint',
    'cssLint',
    'jsLint'
));

gulp.task('build', gulp.series(
    'lint',
    'clean',
    'htmlBuild',
    'cssBuild',
    'jsBuild',
    'jsfxr',
    'imageMin',
    'zip',
    'genDocs'
));

</code></pre><h3 id=submission-conclusion>submission - conclusion</h3><p>During the last day, 80% of the game was completed, everything was to be put together, except that my team mate was very ill &amp; could not work on the project.</p><p>We almost did not submit because the game cuz &lsquo;incomplete, except we did submit the game that was too because I insisted on submitting,</p><p>My friend &amp; partner in the project.
<a href=https://github.com/FR0ST1N/Pew-Pew/ rel="nofollow noreferrer" target=_blank>FR0ST1N</a></p><p>At the end, It was fun..</p></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Bluepie</span></p><p class=copyright-item><span>Link:</span>
<a href=//bluepie.in/2019/11/game-dev/>//bluepie.in/2019/11/game-dev/</span></p></div><div class=post-tags><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=//bluepie.in/>home</a></span></section></div><div class=post-nav><a href=//bluepie.in/2019/10/android-reversing-part-2/ class=prev rel=prev title="Android Reversing Part 2"><i class="iconfont icon-left"></i>&nbsp;Android Reversing Part 2</a>
<a href=//bluepie.in/2019/12/linux-ld_preload/ class=next rel=next title="Liunx LD_PRELOAD">Liunx LD_PRELOAD&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"gopinath001-github-io-blog"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2017 - 2020</span>
<span class=with-love>|</span>
<span class=author itemprop=copyrightHolder><a href=//bluepie.in/>Bluepie</a></span></div></footer><script src=//bluepie.in/js/vendor_no_gallery.min.js async></script></div></body></html>